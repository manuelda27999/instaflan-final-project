function cov_2irbuo7gvc(){var path="C:\\Users\\loco8\\workspace\\eurofirms-bootcamp-202305\\staff\\manuel-david-castillo\\instaflan-fullstack\\api\\logic\\user-logic\\searchUser.js";var hash="b30ed649635a5205278a98860d0081a80f655050";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\loco8\\workspace\\eurofirms-bootcamp-202305\\staff\\manuel-david-castillo\\instaflan-fullstack\\api\\logic\\user-logic\\searchUser.js",statementMap:{"0":{start:{line:1,column:37},end:{line:1,column:69}},"1":{start:{line:2,column:17},end:{line:2,column:45}},"2":{start:{line:5,column:4},end:{line:5,column:22}},"3":{start:{line:6,column:4},end:{line:6,column:22}},"4":{start:{line:8,column:18},end:{line:8,column:45}},"5":{start:{line:10,column:4},end:{line:20,column:10}},"6":{start:{line:12,column:12},end:{line:12,column:58}},"7":{start:{line:12,column:24},end:{line:12,column:58}},"8":{start:{line:14,column:12},end:{line:17,column:14}},"9":{start:{line:15,column:16},end:{line:15,column:45}},"10":{start:{line:16,column:16},end:{line:16,column:31}},"11":{start:{line:19,column:12},end:{line:19,column:24}},"12":{start:{line:23,column:0},end:{line:23,column:27}}},fnMap:{"0":{name:"searchUser",decl:{start:{line:4,column:9},end:{line:4,column:19}},loc:{start:{line:4,column:34},end:{line:21,column:1}},line:4},"1":{name:"(anonymous_1)",decl:{start:{line:11,column:14},end:{line:11,column:15}},loc:{start:{line:11,column:23},end:{line:20,column:9}},line:11},"2":{name:"(anonymous_2)",decl:{start:{line:14,column:26},end:{line:14,column:27}},loc:{start:{line:14,column:34},end:{line:17,column:13}},line:14}},branchMap:{"0":{loc:{start:{line:12,column:12},end:{line:12,column:58}},type:"if",locations:[{start:{line:12,column:12},end:{line:12,column:58}},{start:{line:12,column:12},end:{line:12,column:58}}],line:12}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b30ed649635a5205278a98860d0081a80f655050"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2irbuo7gvc=function(){return actualCoverage;};}return actualCoverage;}cov_2irbuo7gvc();const{validateId,validateText}=(cov_2irbuo7gvc().s[0]++,require('../helpers/validators'));const{User}=(cov_2irbuo7gvc().s[1]++,require('../../data/models'));function searchUser(userId,text){cov_2irbuo7gvc().f[0]++;cov_2irbuo7gvc().s[2]++;validateId(userId);cov_2irbuo7gvc().s[3]++;validateText(text);const regex=(cov_2irbuo7gvc().s[4]++,new RegExp(`^${text}`,'i'));cov_2irbuo7gvc().s[5]++;return User.find({name:{$regex:regex}},{name:1,image:1}).lean().then(users=>{cov_2irbuo7gvc().f[1]++;cov_2irbuo7gvc().s[6]++;if(!users){cov_2irbuo7gvc().b[0][0]++;cov_2irbuo7gvc().s[7]++;throw new Error('users not found');}else{cov_2irbuo7gvc().b[0][1]++;}cov_2irbuo7gvc().s[8]++;users.forEach(user=>{cov_2irbuo7gvc().f[2]++;cov_2irbuo7gvc().s[9]++;user.id=user._id.toString();cov_2irbuo7gvc().s[10]++;delete user._id;});cov_2irbuo7gvc().s[11]++;return users;});}cov_2irbuo7gvc().s[12]++;module.exports=searchUser;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMmlyYnVvN2d2YyIsImFjdHVhbENvdmVyYWdlIiwidmFsaWRhdGVJZCIsInZhbGlkYXRlVGV4dCIsInMiLCJyZXF1aXJlIiwiVXNlciIsInNlYXJjaFVzZXIiLCJ1c2VySWQiLCJ0ZXh0IiwiZiIsInJlZ2V4IiwiUmVnRXhwIiwiZmluZCIsIm5hbWUiLCIkcmVnZXgiLCJpbWFnZSIsImxlYW4iLCJ0aGVuIiwidXNlcnMiLCJiIiwiRXJyb3IiLCJmb3JFYWNoIiwidXNlciIsImlkIiwiX2lkIiwidG9TdHJpbmciLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsic2VhcmNoVXNlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IHZhbGlkYXRlSWQsIHZhbGlkYXRlVGV4dCB9ID0gcmVxdWlyZSgnLi4vaGVscGVycy92YWxpZGF0b3JzJylcclxuY29uc3QgeyBVc2VyIH0gPSByZXF1aXJlKCcuLi8uLi9kYXRhL21vZGVscycpXHJcblxyXG5mdW5jdGlvbiBzZWFyY2hVc2VyKHVzZXJJZCwgdGV4dCkge1xyXG4gICAgdmFsaWRhdGVJZCh1c2VySWQpXHJcbiAgICB2YWxpZGF0ZVRleHQodGV4dClcclxuXHJcbiAgICBjb25zdCByZWdleCA9IG5ldyBSZWdFeHAoYF4ke3RleHR9YCwgJ2knKVxyXG5cclxuICAgIHJldHVybiBVc2VyLmZpbmQoeyBuYW1lOiB7ICRyZWdleDogcmVnZXggfSB9LCB7IG5hbWU6IDEsIGltYWdlOiAxIH0pLmxlYW4oKVxyXG4gICAgICAgIC50aGVuKHVzZXJzID0+IHtcclxuICAgICAgICAgICAgaWYgKCF1c2VycykgdGhyb3cgbmV3IEVycm9yKCd1c2VycyBub3QgZm91bmQnKVxyXG5cclxuICAgICAgICAgICAgdXNlcnMuZm9yRWFjaCh1c2VyID0+IHtcclxuICAgICAgICAgICAgICAgIHVzZXIuaWQgPSB1c2VyLl9pZC50b1N0cmluZygpXHJcbiAgICAgICAgICAgICAgICBkZWxldGUgdXNlci5faWRcclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB1c2Vyc1xyXG4gICAgICAgIH0pXHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gc2VhcmNoVXNlciJdLCJtYXBwaW5ncyI6IjByRUFlWTtBQUFBQSxjQUFBLFNBQUFBLENBQUEsU0FBQUMsY0FBQSxXQUFBQSxjQUFBLEVBQUFELGNBQUEsR0FmWixLQUFNLENBQUVFLFVBQVUsQ0FBRUMsWUFBYSxDQUFDLEVBQUFILGNBQUEsR0FBQUksQ0FBQSxNQUFHQyxPQUFPLENBQUMsdUJBQXVCLENBQUMsRUFDckUsS0FBTSxDQUFFQyxJQUFLLENBQUMsRUFBQU4sY0FBQSxHQUFBSSxDQUFBLE1BQUdDLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxFQUU3QyxRQUFTLENBQUFFLFVBQVVBLENBQUNDLE1BQU0sQ0FBRUMsSUFBSSxDQUFFLENBQUFULGNBQUEsR0FBQVUsQ0FBQSxNQUFBVixjQUFBLEdBQUFJLENBQUEsTUFDOUJGLFVBQVUsQ0FBQ00sTUFBTSxDQUFDLENBQUFSLGNBQUEsR0FBQUksQ0FBQSxNQUNsQkQsWUFBWSxDQUFDTSxJQUFJLENBQUMsQ0FFbEIsS0FBTSxDQUFBRSxLQUFLLEVBQUFYLGNBQUEsR0FBQUksQ0FBQSxNQUFHLEdBQUksQ0FBQVEsTUFBTSxDQUFFLElBQUdILElBQUssRUFBQyxDQUFFLEdBQUcsQ0FBQyxFQUFBVCxjQUFBLEdBQUFJLENBQUEsTUFFekMsTUFBTyxDQUFBRSxJQUFJLENBQUNPLElBQUksQ0FBQyxDQUFFQyxJQUFJLENBQUUsQ0FBRUMsTUFBTSxDQUFFSixLQUFNLENBQUUsQ0FBQyxDQUFFLENBQUVHLElBQUksQ0FBRSxDQUFDLENBQUVFLEtBQUssQ0FBRSxDQUFFLENBQUMsQ0FBQyxDQUFDQyxJQUFJLENBQUMsQ0FBQyxDQUN0RUMsSUFBSSxDQUFDQyxLQUFLLEVBQUksQ0FBQW5CLGNBQUEsR0FBQVUsQ0FBQSxNQUFBVixjQUFBLEdBQUFJLENBQUEsTUFDWCxHQUFJLENBQUNlLEtBQUssQ0FBRSxDQUFBbkIsY0FBQSxHQUFBb0IsQ0FBQSxTQUFBcEIsY0FBQSxHQUFBSSxDQUFBLFdBQU0sSUFBSSxDQUFBaUIsS0FBSyxDQUFDLGlCQUFpQixDQUFDLENBQUQsQ0FBQyxLQUFBckIsY0FBQSxHQUFBb0IsQ0FBQSxVQUFBcEIsY0FBQSxHQUFBSSxDQUFBLE1BRTlDZSxLQUFLLENBQUNHLE9BQU8sQ0FBQ0MsSUFBSSxFQUFJLENBQUF2QixjQUFBLEdBQUFVLENBQUEsTUFBQVYsY0FBQSxHQUFBSSxDQUFBLE1BQ2xCbUIsSUFBSSxDQUFDQyxFQUFFLENBQUdELElBQUksQ0FBQ0UsR0FBRyxDQUFDQyxRQUFRLENBQUMsQ0FBQyxDQUFBMUIsY0FBQSxHQUFBSSxDQUFBLE9BQzdCLE1BQU8sQ0FBQW1CLElBQUksQ0FBQ0UsR0FBRyxDQUNuQixDQUFDLENBQUMsQ0FBQXpCLGNBQUEsR0FBQUksQ0FBQSxPQUVGLE1BQU8sQ0FBQWUsS0FBSyxDQUNoQixDQUFDLENBQUMsQ0FDVixDQUFDbkIsY0FBQSxHQUFBSSxDQUFBLE9BRUR1QixNQUFNLENBQUNDLE9BQU8sQ0FBR3JCLFVBQVUifQ==