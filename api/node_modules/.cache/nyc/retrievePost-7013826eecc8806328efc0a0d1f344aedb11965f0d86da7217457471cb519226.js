function cov_p2n014f93(){var path="C:\\Users\\loco8\\workspace\\eurofirms-bootcamp-202305\\staff\\manuel-david-castillo\\instaflan-fullstack\\api\\logic\\post-logic\\retrievePost.js";var hash="51eb62a2befe44eb141ccb8cb962883d3e413d0e";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\loco8\\workspace\\eurofirms-bootcamp-202305\\staff\\manuel-david-castillo\\instaflan-fullstack\\api\\logic\\post-logic\\retrievePost.js",statementMap:{"0":{start:{line:1,column:23},end:{line:1,column:55}},"1":{start:{line:2,column:23},end:{line:2,column:51}},"2":{start:{line:5,column:4},end:{line:5,column:22}},"3":{start:{line:6,column:4},end:{line:6,column:22}},"4":{start:{line:8,column:4},end:{line:19,column:10}},"5":{start:{line:10,column:12},end:{line:10,column:56}},"6":{start:{line:10,column:23},end:{line:10,column:56}},"7":{start:{line:11,column:12},end:{line:11,column:56}},"8":{start:{line:11,column:23},end:{line:11,column:56}},"9":{start:{line:13,column:12},end:{line:13,column:106}},"10":{start:{line:13,column:51},end:{line:13,column:106}},"11":{start:{line:15,column:12},end:{line:15,column:30}},"12":{start:{line:16,column:12},end:{line:16,column:27}},"13":{start:{line:18,column:12},end:{line:18,column:23}},"14":{start:{line:22,column:0},end:{line:22,column:29}}},fnMap:{"0":{name:"retrievePost",decl:{start:{line:4,column:9},end:{line:4,column:21}},loc:{start:{line:4,column:38},end:{line:20,column:1}},line:4},"1":{name:"(anonymous_1)",decl:{start:{line:9,column:14},end:{line:9,column:15}},loc:{start:{line:9,column:32},end:{line:19,column:9}},line:9}},branchMap:{"0":{loc:{start:{line:10,column:12},end:{line:10,column:56}},type:"if",locations:[{start:{line:10,column:12},end:{line:10,column:56}},{start:{line:10,column:12},end:{line:10,column:56}}],line:10},"1":{loc:{start:{line:11,column:12},end:{line:11,column:56}},type:"if",locations:[{start:{line:11,column:12},end:{line:11,column:56}},{start:{line:11,column:12},end:{line:11,column:56}}],line:11},"2":{loc:{start:{line:13,column:12},end:{line:13,column:106}},type:"if",locations:[{start:{line:13,column:12},end:{line:13,column:106}},{start:{line:13,column:12},end:{line:13,column:106}}],line:13}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0},f:{"0":0,"1":0},b:{"0":[0,0],"1":[0,0],"2":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"51eb62a2befe44eb141ccb8cb962883d3e413d0e"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_p2n014f93=function(){return actualCoverage;};}return actualCoverage;}cov_p2n014f93();const{validateId}=(cov_p2n014f93().s[0]++,require('../helpers/validators'));const{User,Post}=(cov_p2n014f93().s[1]++,require('../../data/models'));function retrievePost(userId,postId){cov_p2n014f93().f[0]++;cov_p2n014f93().s[2]++;validateId(userId);cov_p2n014f93().s[3]++;validateId(postId);cov_p2n014f93().s[4]++;return Promise.all([User.findById(userId).lean(),Post.findById(postId,'-likes -date -__v').lean()]).then(([user,post])=>{cov_p2n014f93().f[1]++;cov_p2n014f93().s[5]++;if(!post){cov_p2n014f93().b[0][0]++;cov_p2n014f93().s[6]++;throw new Error('post not found');}else{cov_p2n014f93().b[0][1]++;}cov_p2n014f93().s[7]++;if(!user){cov_p2n014f93().b[1][0]++;cov_p2n014f93().s[8]++;throw new Error('user not found');}else{cov_p2n014f93().b[1][1]++;}cov_p2n014f93().s[9]++;if(post.author.toString()!==userId){cov_p2n014f93().b[2][0]++;cov_p2n014f93().s[10]++;throw new Error('user and author of post is different');}else{cov_p2n014f93().b[2][1]++;}cov_p2n014f93().s[11]++;delete post.author;cov_p2n014f93().s[12]++;delete post._id;cov_p2n014f93().s[13]++;return post;});}cov_p2n014f93().s[14]++;module.exports=retrievePost;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfcDJuMDE0ZjkzIiwiYWN0dWFsQ292ZXJhZ2UiLCJ2YWxpZGF0ZUlkIiwicyIsInJlcXVpcmUiLCJVc2VyIiwiUG9zdCIsInJldHJpZXZlUG9zdCIsInVzZXJJZCIsInBvc3RJZCIsImYiLCJQcm9taXNlIiwiYWxsIiwiZmluZEJ5SWQiLCJsZWFuIiwidGhlbiIsInVzZXIiLCJwb3N0IiwiYiIsIkVycm9yIiwiYXV0aG9yIiwidG9TdHJpbmciLCJfaWQiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsicmV0cmlldmVQb3N0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgdmFsaWRhdGVJZCB9ID0gcmVxdWlyZSgnLi4vaGVscGVycy92YWxpZGF0b3JzJylcclxuY29uc3QgeyBVc2VyLCBQb3N0IH0gPSByZXF1aXJlKCcuLi8uLi9kYXRhL21vZGVscycpXHJcblxyXG5mdW5jdGlvbiByZXRyaWV2ZVBvc3QodXNlcklkLCBwb3N0SWQpIHtcclxuICAgIHZhbGlkYXRlSWQodXNlcklkKVxyXG4gICAgdmFsaWRhdGVJZChwb3N0SWQpXHJcblxyXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFtVc2VyLmZpbmRCeUlkKHVzZXJJZCkubGVhbigpLCBQb3N0LmZpbmRCeUlkKHBvc3RJZCwgJy1saWtlcyAtZGF0ZSAtX192JykubGVhbigpXSlcclxuICAgICAgICAudGhlbigoW3VzZXIsIHBvc3RdKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghcG9zdCkgdGhyb3cgbmV3IEVycm9yKCdwb3N0IG5vdCBmb3VuZCcpXHJcbiAgICAgICAgICAgIGlmICghdXNlcikgdGhyb3cgbmV3IEVycm9yKCd1c2VyIG5vdCBmb3VuZCcpXHJcblxyXG4gICAgICAgICAgICBpZiAocG9zdC5hdXRob3IudG9TdHJpbmcoKSAhPT0gdXNlcklkKSB0aHJvdyBuZXcgRXJyb3IoJ3VzZXIgYW5kIGF1dGhvciBvZiBwb3N0IGlzIGRpZmZlcmVudCcpXHJcblxyXG4gICAgICAgICAgICBkZWxldGUgcG9zdC5hdXRob3JcclxuICAgICAgICAgICAgZGVsZXRlIHBvc3QuX2lkXHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcG9zdFxyXG4gICAgICAgIH0pXHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gcmV0cmlldmVQb3N0Il0sIm1hcHBpbmdzIjoibWtGQWVZO0FBQUFBLGFBQUEsU0FBQUEsQ0FBQSxTQUFBQyxjQUFBLFdBQUFBLGNBQUEsRUFBQUQsYUFBQSxHQWZaLEtBQU0sQ0FBRUUsVUFBVyxDQUFDLEVBQUFGLGFBQUEsR0FBQUcsQ0FBQSxNQUFHQyxPQUFPLENBQUMsdUJBQXVCLENBQUMsRUFDdkQsS0FBTSxDQUFFQyxJQUFJLENBQUVDLElBQUssQ0FBQyxFQUFBTixhQUFBLEdBQUFHLENBQUEsTUFBR0MsT0FBTyxDQUFDLG1CQUFtQixDQUFDLEVBRW5ELFFBQVMsQ0FBQUcsWUFBWUEsQ0FBQ0MsTUFBTSxDQUFFQyxNQUFNLENBQUUsQ0FBQVQsYUFBQSxHQUFBVSxDQUFBLE1BQUFWLGFBQUEsR0FBQUcsQ0FBQSxNQUNsQ0QsVUFBVSxDQUFDTSxNQUFNLENBQUMsQ0FBQVIsYUFBQSxHQUFBRyxDQUFBLE1BQ2xCRCxVQUFVLENBQUNPLE1BQU0sQ0FBQyxDQUFBVCxhQUFBLEdBQUFHLENBQUEsTUFFbEIsTUFBTyxDQUFBUSxPQUFPLENBQUNDLEdBQUcsQ0FBQyxDQUFDUCxJQUFJLENBQUNRLFFBQVEsQ0FBQ0wsTUFBTSxDQUFDLENBQUNNLElBQUksQ0FBQyxDQUFDLENBQUVSLElBQUksQ0FBQ08sUUFBUSxDQUFDSixNQUFNLENBQUUsbUJBQW1CLENBQUMsQ0FBQ0ssSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQ2hHQyxJQUFJLENBQUMsQ0FBQyxDQUFDQyxJQUFJLENBQUVDLElBQUksQ0FBQyxHQUFLLENBQUFqQixhQUFBLEdBQUFVLENBQUEsTUFBQVYsYUFBQSxHQUFBRyxDQUFBLE1BQ3BCLEdBQUksQ0FBQ2MsSUFBSSxDQUFFLENBQUFqQixhQUFBLEdBQUFrQixDQUFBLFNBQUFsQixhQUFBLEdBQUFHLENBQUEsV0FBTSxJQUFJLENBQUFnQixLQUFLLENBQUMsZ0JBQWdCLENBQUMsQ0FBRCxDQUFDLEtBQUFuQixhQUFBLEdBQUFrQixDQUFBLFVBQUFsQixhQUFBLEdBQUFHLENBQUEsTUFDNUMsR0FBSSxDQUFDYSxJQUFJLENBQUUsQ0FBQWhCLGFBQUEsR0FBQWtCLENBQUEsU0FBQWxCLGFBQUEsR0FBQUcsQ0FBQSxXQUFNLElBQUksQ0FBQWdCLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFELENBQUMsS0FBQW5CLGFBQUEsR0FBQWtCLENBQUEsVUFBQWxCLGFBQUEsR0FBQUcsQ0FBQSxNQUU1QyxHQUFJYyxJQUFJLENBQUNHLE1BQU0sQ0FBQ0MsUUFBUSxDQUFDLENBQUMsR0FBS2IsTUFBTSxDQUFFLENBQUFSLGFBQUEsR0FBQWtCLENBQUEsU0FBQWxCLGFBQUEsR0FBQUcsQ0FBQSxZQUFNLElBQUksQ0FBQWdCLEtBQUssQ0FBQyxzQ0FBc0MsQ0FBQyxDQUFELENBQUMsS0FBQW5CLGFBQUEsR0FBQWtCLENBQUEsVUFBQWxCLGFBQUEsR0FBQUcsQ0FBQSxPQUU5RixNQUFPLENBQUFjLElBQUksQ0FBQ0csTUFBTSxDQUFBcEIsYUFBQSxHQUFBRyxDQUFBLE9BQ2xCLE1BQU8sQ0FBQWMsSUFBSSxDQUFDSyxHQUFHLENBQUF0QixhQUFBLEdBQUFHLENBQUEsT0FFZixNQUFPLENBQUFjLElBQUksQ0FDZixDQUFDLENBQUMsQ0FDVixDQUFDakIsYUFBQSxHQUFBRyxDQUFBLE9BRURvQixNQUFNLENBQUNDLE9BQU8sQ0FBR2pCLFlBQVkifQ==