function cov_27vu3q8wed(){var path="C:\\Users\\loco8\\workspace\\eurofirms-bootcamp-202305\\staff\\manuel-david-castillo\\instaflan-fullstack\\api\\logic\\user-logic\\retrieveUserById.js";var hash="7e41a189b6f730df6671eb2baef5d73dc798a44b";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\loco8\\workspace\\eurofirms-bootcamp-202305\\staff\\manuel-david-castillo\\instaflan-fullstack\\api\\logic\\user-logic\\retrieveUserById.js",statementMap:{"0":{start:{line:1,column:23},end:{line:1,column:55}},"1":{start:{line:2,column:17},end:{line:2,column:45}},"2":{start:{line:5,column:4},end:{line:5,column:22}},"3":{start:{line:6,column:4},end:{line:6,column:29}},"4":{start:{line:8,column:4},end:{line:21,column:10}},"5":{start:{line:11,column:12},end:{line:11,column:56}},"6":{start:{line:11,column:23},end:{line:11,column:56}},"7":{start:{line:12,column:12},end:{line:12,column:70}},"8":{start:{line:12,column:30},end:{line:12,column:70}},"9":{start:{line:14,column:35},end:{line:14,column:80}},"10":{start:{line:14,column:64},end:{line:14,column:79}},"11":{start:{line:16,column:12},end:{line:16,column:84}},"12":{start:{line:18,column:12},end:{line:18,column:36}},"13":{start:{line:20,column:12},end:{line:20,column:30}},"14":{start:{line:24,column:0},end:{line:24,column:29}}},fnMap:{"0":{name:"retrieveUser",decl:{start:{line:4,column:9},end:{line:4,column:21}},loc:{start:{line:4,column:45},end:{line:22,column:1}},line:4},"1":{name:"(anonymous_1)",decl:{start:{line:10,column:14},end:{line:10,column:15}},loc:{start:{line:10,column:39},end:{line:21,column:9}},line:10},"2":{name:"(anonymous_2)",decl:{start:{line:14,column:54},end:{line:14,column:55}},loc:{start:{line:14,column:64},end:{line:14,column:79}},line:14}},branchMap:{"0":{loc:{start:{line:11,column:12},end:{line:11,column:56}},type:"if",locations:[{start:{line:11,column:12},end:{line:11,column:56}},{start:{line:11,column:12},end:{line:11,column:56}}],line:11},"1":{loc:{start:{line:12,column:12},end:{line:12,column:70}},type:"if",locations:[{start:{line:12,column:12},end:{line:12,column:70}},{start:{line:12,column:12},end:{line:12,column:70}}],line:12}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"7e41a189b6f730df6671eb2baef5d73dc798a44b"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_27vu3q8wed=function(){return actualCoverage;};}return actualCoverage;}cov_27vu3q8wed();const{validateId}=(cov_27vu3q8wed().s[0]++,require('../helpers/validators'));const{User}=(cov_27vu3q8wed().s[1]++,require('../../data/models'));function retrieveUser(userId,userIdProfile){cov_27vu3q8wed().f[0]++;cov_27vu3q8wed().s[2]++;validateId(userId);cov_27vu3q8wed().s[3]++;validateId(userIdProfile);cov_27vu3q8wed().s[4]++;return Promise.all([User.findById(userId,'following -_id').lean(),User.findById(userIdProfile,'name email image description followed following').lean()]).then(([user,userProfile])=>{cov_27vu3q8wed().f[1]++;cov_27vu3q8wed().s[5]++;if(!user){cov_27vu3q8wed().b[0][0]++;cov_27vu3q8wed().s[6]++;throw new Error('user not found');}else{cov_27vu3q8wed().b[0][1]++;}cov_27vu3q8wed().s[7]++;if(!userProfile){cov_27vu3q8wed().b[1][0]++;cov_27vu3q8wed().s[8]++;throw new Error('userProfile not found');}else{cov_27vu3q8wed().b[1][1]++;}const usersFollowing=(cov_27vu3q8wed().s[9]++,user.following.map(user=>{cov_27vu3q8wed().f[2]++;cov_27vu3q8wed().s[10]++;return user.toString();}));cov_27vu3q8wed().s[11]++;userProfile.follow=usersFollowing.includes(userProfile._id.toString());cov_27vu3q8wed().s[12]++;delete userIdProfile._id;cov_27vu3q8wed().s[13]++;return userProfile;});}cov_27vu3q8wed().s[14]++;module.exports=retrieveUser;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMjd2dTNxOHdlZCIsImFjdHVhbENvdmVyYWdlIiwidmFsaWRhdGVJZCIsInMiLCJyZXF1aXJlIiwiVXNlciIsInJldHJpZXZlVXNlciIsInVzZXJJZCIsInVzZXJJZFByb2ZpbGUiLCJmIiwiUHJvbWlzZSIsImFsbCIsImZpbmRCeUlkIiwibGVhbiIsInRoZW4iLCJ1c2VyIiwidXNlclByb2ZpbGUiLCJiIiwiRXJyb3IiLCJ1c2Vyc0ZvbGxvd2luZyIsImZvbGxvd2luZyIsIm1hcCIsInRvU3RyaW5nIiwiZm9sbG93IiwiaW5jbHVkZXMiLCJfaWQiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsicmV0cmlldmVVc2VyQnlJZC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IHZhbGlkYXRlSWQgfSA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvdmFsaWRhdG9ycycpXHJcbmNvbnN0IHsgVXNlciB9ID0gcmVxdWlyZSgnLi4vLi4vZGF0YS9tb2RlbHMnKVxyXG5cclxuZnVuY3Rpb24gcmV0cmlldmVVc2VyKHVzZXJJZCwgdXNlcklkUHJvZmlsZSkge1xyXG4gICAgdmFsaWRhdGVJZCh1c2VySWQpXHJcbiAgICB2YWxpZGF0ZUlkKHVzZXJJZFByb2ZpbGUpXHJcblxyXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFtVc2VyLmZpbmRCeUlkKHVzZXJJZCwgJ2ZvbGxvd2luZyAtX2lkJykubGVhbigpLFxyXG4gICAgVXNlci5maW5kQnlJZCh1c2VySWRQcm9maWxlLCAnbmFtZSBlbWFpbCBpbWFnZSBkZXNjcmlwdGlvbiBmb2xsb3dlZCBmb2xsb3dpbmcnKS5sZWFuKCldKVxyXG4gICAgICAgIC50aGVuKChbdXNlciwgdXNlclByb2ZpbGVdKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghdXNlcikgdGhyb3cgbmV3IEVycm9yKCd1c2VyIG5vdCBmb3VuZCcpXHJcbiAgICAgICAgICAgIGlmICghdXNlclByb2ZpbGUpIHRocm93IG5ldyBFcnJvcigndXNlclByb2ZpbGUgbm90IGZvdW5kJylcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHVzZXJzRm9sbG93aW5nID0gdXNlci5mb2xsb3dpbmcubWFwKCh1c2VyKSA9PiB1c2VyLnRvU3RyaW5nKCkpO1xyXG5cclxuICAgICAgICAgICAgdXNlclByb2ZpbGUuZm9sbG93ID0gdXNlcnNGb2xsb3dpbmcuaW5jbHVkZXModXNlclByb2ZpbGUuX2lkLnRvU3RyaW5nKCkpXHJcblxyXG4gICAgICAgICAgICBkZWxldGUgdXNlcklkUHJvZmlsZS5faWRcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB1c2VyUHJvZmlsZVxyXG4gICAgICAgIH0pXHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gcmV0cmlldmVVc2VyIl0sIm1hcHBpbmdzIjoidWhGQWVZO0FBQUFBLGNBQUEsU0FBQUEsQ0FBQSxTQUFBQyxjQUFBLFdBQUFBLGNBQUEsRUFBQUQsY0FBQSxHQWZaLEtBQU0sQ0FBRUUsVUFBVyxDQUFDLEVBQUFGLGNBQUEsR0FBQUcsQ0FBQSxNQUFHQyxPQUFPLENBQUMsdUJBQXVCLENBQUMsRUFDdkQsS0FBTSxDQUFFQyxJQUFLLENBQUMsRUFBQUwsY0FBQSxHQUFBRyxDQUFBLE1BQUdDLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxFQUU3QyxRQUFTLENBQUFFLFlBQVlBLENBQUNDLE1BQU0sQ0FBRUMsYUFBYSxDQUFFLENBQUFSLGNBQUEsR0FBQVMsQ0FBQSxNQUFBVCxjQUFBLEdBQUFHLENBQUEsTUFDekNELFVBQVUsQ0FBQ0ssTUFBTSxDQUFDLENBQUFQLGNBQUEsR0FBQUcsQ0FBQSxNQUNsQkQsVUFBVSxDQUFDTSxhQUFhLENBQUMsQ0FBQVIsY0FBQSxHQUFBRyxDQUFBLE1BRXpCLE1BQU8sQ0FBQU8sT0FBTyxDQUFDQyxHQUFHLENBQUMsQ0FBQ04sSUFBSSxDQUFDTyxRQUFRLENBQUNMLE1BQU0sQ0FBRSxnQkFBZ0IsQ0FBQyxDQUFDTSxJQUFJLENBQUMsQ0FBQyxDQUNsRVIsSUFBSSxDQUFDTyxRQUFRLENBQUNKLGFBQWEsQ0FBRSxpREFBaUQsQ0FBQyxDQUFDSyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FDbkZDLElBQUksQ0FBQyxDQUFDLENBQUNDLElBQUksQ0FBRUMsV0FBVyxDQUFDLEdBQUssQ0FBQWhCLGNBQUEsR0FBQVMsQ0FBQSxNQUFBVCxjQUFBLEdBQUFHLENBQUEsTUFDM0IsR0FBSSxDQUFDWSxJQUFJLENBQUUsQ0FBQWYsY0FBQSxHQUFBaUIsQ0FBQSxTQUFBakIsY0FBQSxHQUFBRyxDQUFBLFdBQU0sSUFBSSxDQUFBZSxLQUFLLENBQUMsZ0JBQWdCLENBQUMsQ0FBRCxDQUFDLEtBQUFsQixjQUFBLEdBQUFpQixDQUFBLFVBQUFqQixjQUFBLEdBQUFHLENBQUEsTUFDNUMsR0FBSSxDQUFDYSxXQUFXLENBQUUsQ0FBQWhCLGNBQUEsR0FBQWlCLENBQUEsU0FBQWpCLGNBQUEsR0FBQUcsQ0FBQSxXQUFNLElBQUksQ0FBQWUsS0FBSyxDQUFDLHVCQUF1QixDQUFDLENBQUQsQ0FBQyxLQUFBbEIsY0FBQSxHQUFBaUIsQ0FBQSxVQUUxRCxLQUFNLENBQUFFLGNBQWMsRUFBQW5CLGNBQUEsR0FBQUcsQ0FBQSxNQUFHWSxJQUFJLENBQUNLLFNBQVMsQ0FBQ0MsR0FBRyxDQUFFTixJQUFJLEVBQUssQ0FBQWYsY0FBQSxHQUFBUyxDQUFBLE1BQUFULGNBQUEsR0FBQUcsQ0FBQSxjQUFBWSxJQUFJLENBQUNPLFFBQVEsQ0FBQyxDQUFDLENBQUQsQ0FBQyxDQUFDLEVBQUN0QixjQUFBLEdBQUFHLENBQUEsT0FFckVhLFdBQVcsQ0FBQ08sTUFBTSxDQUFHSixjQUFjLENBQUNLLFFBQVEsQ0FBQ1IsV0FBVyxDQUFDUyxHQUFHLENBQUNILFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQXRCLGNBQUEsR0FBQUcsQ0FBQSxPQUV4RSxNQUFPLENBQUFLLGFBQWEsQ0FBQ2lCLEdBQUcsQ0FBQXpCLGNBQUEsR0FBQUcsQ0FBQSxPQUV4QixNQUFPLENBQUFhLFdBQVcsQ0FDdEIsQ0FBQyxDQUFDLENBQ1YsQ0FBQ2hCLGNBQUEsR0FBQUcsQ0FBQSxPQUVEdUIsTUFBTSxDQUFDQyxPQUFPLENBQUdyQixZQUFZIn0=