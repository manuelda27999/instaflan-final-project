function cov_13ky8utfya(){var path="C:\\Users\\loco8\\workspace\\eurofirms-bootcamp-202305\\staff\\manuel-david-castillo\\instaflan-fullstack\\api\\logic\\post-logic\\retrievePostsNotFollowed.js";var hash="bf696e6b5bac0d0831ccc51c82e8399323dea6ce";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\loco8\\workspace\\eurofirms-bootcamp-202305\\staff\\manuel-david-castillo\\instaflan-fullstack\\api\\logic\\post-logic\\retrievePostsNotFollowed.js",statementMap:{"0":{start:{line:1,column:23},end:{line:1,column:51}},"1":{start:{line:2,column:23},end:{line:2,column:55}},"2":{start:{line:5,column:4},end:{line:5,column:22}},"3":{start:{line:7,column:4},end:{line:122,column:10}},"4":{start:{line:9,column:12},end:{line:9,column:56}},"5":{start:{line:9,column:23},end:{line:9,column:56}},"6":{start:{line:11,column:34},end:{line:11,column:70}},"7":{start:{line:12,column:12},end:{line:12,column:40}},"8":{start:{line:14,column:12},end:{line:82,column:42}},"9":{start:{line:85,column:12},end:{line:85,column:58}},"10":{start:{line:85,column:24},end:{line:85,column:58}},"11":{start:{line:86,column:12},end:{line:86,column:56}},"12":{start:{line:86,column:23},end:{line:86,column:56}},"13":{start:{line:88,column:12},end:{line:119,column:14}},"14":{start:{line:89,column:16},end:{line:89,column:31}},"15":{start:{line:91,column:16},end:{line:91,column:54}},"16":{start:{line:91,column:36},end:{line:91,column:54}},"17":{start:{line:93,column:33},end:{line:95,column:18}},"18":{start:{line:94,column:20},end:{line:94,column:42}},"19":{start:{line:97,column:16},end:{line:97,column:53}},"20":{start:{line:99,column:16},end:{line:118,column:17}},"21":{start:{line:100,column:20},end:{line:117,column:22}},"22":{start:{line:102,column:24},end:{line:102,column:59}},"23":{start:{line:103,column:24},end:{line:103,column:42}},"24":{start:{line:105,column:24},end:{line:108,column:25}},"25":{start:{line:106,column:28},end:{line:106,column:66}},"26":{start:{line:107,column:28},end:{line:107,column:53}},"27":{start:{line:110,column:24},end:{line:110,column:57}},"28":{start:{line:111,column:24},end:{line:111,column:51}},"29":{start:{line:112,column:24},end:{line:112,column:54}},"30":{start:{line:113,column:24},end:{line:113,column:54}},"31":{start:{line:114,column:24},end:{line:114,column:49}},"32":{start:{line:115,column:24},end:{line:115,column:55}},"33":{start:{line:116,column:24},end:{line:116,column:54}},"34":{start:{line:121,column:12},end:{line:121,column:24}},"35":{start:{line:125,column:0},end:{line:125,column:41}}},fnMap:{"0":{name:"retrievePostsNotFollowed",decl:{start:{line:4,column:9},end:{line:4,column:33}},loc:{start:{line:4,column:42},end:{line:123,column:1}},line:4},"1":{name:"(anonymous_1)",decl:{start:{line:8,column:14},end:{line:8,column:15}},loc:{start:{line:8,column:22},end:{line:83,column:9}},line:8},"2":{name:"(anonymous_2)",decl:{start:{line:84,column:14},end:{line:84,column:15}},loc:{start:{line:84,column:33},end:{line:122,column:9}},line:84},"3":{name:"(anonymous_3)",decl:{start:{line:88,column:26},end:{line:88,column:27}},loc:{start:{line:88,column:34},end:{line:119,column:13}},line:88},"4":{name:"(anonymous_4)",decl:{start:{line:93,column:51},end:{line:93,column:52}},loc:{start:{line:93,column:61},end:{line:95,column:17}},line:93},"5":{name:"(anonymous_5)",decl:{start:{line:100,column:42},end:{line:100,column:43}},loc:{start:{line:100,column:53},end:{line:117,column:21}},line:100}},branchMap:{"0":{loc:{start:{line:9,column:12},end:{line:9,column:56}},type:"if",locations:[{start:{line:9,column:12},end:{line:9,column:56}},{start:{line:9,column:12},end:{line:9,column:56}}],line:9},"1":{loc:{start:{line:11,column:34},end:{line:11,column:70}},type:"cond-expr",locations:[{start:{line:11,column:51},end:{line:11,column:65}},{start:{line:11,column:68},end:{line:11,column:70}}],line:11},"2":{loc:{start:{line:85,column:12},end:{line:85,column:58}},type:"if",locations:[{start:{line:85,column:12},end:{line:85,column:58}},{start:{line:85,column:12},end:{line:85,column:58}}],line:85},"3":{loc:{start:{line:86,column:12},end:{line:86,column:56}},type:"if",locations:[{start:{line:86,column:12},end:{line:86,column:56}},{start:{line:86,column:12},end:{line:86,column:56}}],line:86},"4":{loc:{start:{line:91,column:16},end:{line:91,column:54}},type:"if",locations:[{start:{line:91,column:16},end:{line:91,column:54}},{start:{line:91,column:16},end:{line:91,column:54}}],line:91},"5":{loc:{start:{line:99,column:16},end:{line:118,column:17}},type:"if",locations:[{start:{line:99,column:16},end:{line:118,column:17}},{start:{line:99,column:16},end:{line:118,column:17}}],line:99},"6":{loc:{start:{line:105,column:24},end:{line:108,column:25}},type:"if",locations:[{start:{line:105,column:24},end:{line:108,column:25}},{start:{line:105,column:24},end:{line:108,column:25}}],line:105}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"bf696e6b5bac0d0831ccc51c82e8399323dea6ce"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_13ky8utfya=function(){return actualCoverage;};}return actualCoverage;}cov_13ky8utfya();const{User,Post}=(cov_13ky8utfya().s[0]++,require('../../data/models'));const{validateId}=(cov_13ky8utfya().s[1]++,require('../helpers/validators'));function retrievePostsNotFollowed(userId){cov_13ky8utfya().f[0]++;cov_13ky8utfya().s[2]++;validateId(userId);cov_13ky8utfya().s[3]++;return User.findById(userId).lean().then(user=>{cov_13ky8utfya().f[1]++;cov_13ky8utfya().s[4]++;if(!user){cov_13ky8utfya().b[0][0]++;cov_13ky8utfya().s[5]++;throw new Error('user not found');}else{cov_13ky8utfya().b[0][1]++;}const usersFollowed=(cov_13ky8utfya().s[6]++,user.following?(cov_13ky8utfya().b[1][0]++,user.following):(cov_13ky8utfya().b[1][1]++,[]));cov_13ky8utfya().s[7]++;usersFollowed.push(user._id);cov_13ky8utfya().s[8]++;return Promise.all([Post.aggregate([{$match:{author:{$nin:usersFollowed}}},{$sample:{size:4}},{$lookup:{from:"users",localField:"author",foreignField:"_id",as:"author"}},{$unwind:"$author"},{$lookup:{from:"users",localField:"comments.author",foreignField:"_id",as:"authorComment"}},{$project:{id:{$toString:"$_id"},text:1,image:1,likes:1,"author.name":1,"author.image":1,"author.id":{$toString:"$author._id"},comments:{$map:{input:"$comments",as:"comment",in:{author:{$arrayElemAt:[{$filter:{input:"$authorComment",as:"author",cond:{$eq:["$$author._id","$$comment.author"]}}},0]},text:"$$comment.text",date:"$$comment.date",id:"$$comment._id"}}}}}]),User.findById(userId).lean()]);}).then(([posts,user])=>{cov_13ky8utfya().f[2]++;cov_13ky8utfya().s[9]++;if(!posts){cov_13ky8utfya().b[2][0]++;cov_13ky8utfya().s[10]++;throw new Error('posts not found');}else{cov_13ky8utfya().b[2][1]++;}cov_13ky8utfya().s[11]++;if(!user){cov_13ky8utfya().b[3][0]++;cov_13ky8utfya().s[12]++;throw new Error('user not found');}else{cov_13ky8utfya().b[3][1]++;}cov_13ky8utfya().s[13]++;posts.forEach(post=>{cov_13ky8utfya().f[3]++;cov_13ky8utfya().s[14]++;delete post._id;cov_13ky8utfya().s[15]++;if(!user.favPosts){cov_13ky8utfya().b[4][0]++;cov_13ky8utfya().s[16]++;user.favPosts=[];}else{cov_13ky8utfya().b[4][1]++;}const favPosts=(cov_13ky8utfya().s[17]++,user.favPosts.map(post=>{cov_13ky8utfya().f[4]++;cov_13ky8utfya().s[18]++;return post.toString();}));cov_13ky8utfya().s[19]++;post.fav=favPosts.includes(post.id);cov_13ky8utfya().s[20]++;if(post.comments){cov_13ky8utfya().b[5][0]++;cov_13ky8utfya().s[21]++;post.comments.forEach(comment=>{cov_13ky8utfya().f[5]++;cov_13ky8utfya().s[22]++;comment.id=comment._id.toString();cov_13ky8utfya().s[23]++;delete comment._id;cov_13ky8utfya().s[24]++;if(comment.author._id){cov_13ky8utfya().b[6][0]++;cov_13ky8utfya().s[25]++;comment.author.id=comment.author._id;cov_13ky8utfya().s[26]++;delete comment.author._id;}else{cov_13ky8utfya().b[6][1]++;}cov_13ky8utfya().s[27]++;delete comment.author.description;cov_13ky8utfya().s[28]++;delete comment.author.email;cov_13ky8utfya().s[29]++;delete comment.author.password;cov_13ky8utfya().s[30]++;delete comment.author.favPosts;cov_13ky8utfya().s[31]++;delete comment.author.__v;cov_13ky8utfya().s[32]++;delete comment.author.following;cov_13ky8utfya().s[33]++;delete comment.author.followed;});}else{cov_13ky8utfya().b[5][1]++;}});cov_13ky8utfya().s[34]++;return posts;});}cov_13ky8utfya().s[35]++;module.exports=retrievePostsNotFollowed;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMTNreTh1dGZ5YSIsImFjdHVhbENvdmVyYWdlIiwiVXNlciIsIlBvc3QiLCJzIiwicmVxdWlyZSIsInZhbGlkYXRlSWQiLCJyZXRyaWV2ZVBvc3RzTm90Rm9sbG93ZWQiLCJ1c2VySWQiLCJmIiwiZmluZEJ5SWQiLCJsZWFuIiwidGhlbiIsInVzZXIiLCJiIiwiRXJyb3IiLCJ1c2Vyc0ZvbGxvd2VkIiwiZm9sbG93aW5nIiwicHVzaCIsIl9pZCIsIlByb21pc2UiLCJhbGwiLCJhZ2dyZWdhdGUiLCIkbWF0Y2giLCJhdXRob3IiLCIkbmluIiwiJHNhbXBsZSIsInNpemUiLCIkbG9va3VwIiwiZnJvbSIsImxvY2FsRmllbGQiLCJmb3JlaWduRmllbGQiLCJhcyIsIiR1bndpbmQiLCIkcHJvamVjdCIsImlkIiwiJHRvU3RyaW5nIiwidGV4dCIsImltYWdlIiwibGlrZXMiLCJjb21tZW50cyIsIiRtYXAiLCJpbnB1dCIsImluIiwiJGFycmF5RWxlbUF0IiwiJGZpbHRlciIsImNvbmQiLCIkZXEiLCJkYXRlIiwicG9zdHMiLCJmb3JFYWNoIiwicG9zdCIsImZhdlBvc3RzIiwibWFwIiwidG9TdHJpbmciLCJmYXYiLCJpbmNsdWRlcyIsImNvbW1lbnQiLCJkZXNjcmlwdGlvbiIsImVtYWlsIiwicGFzc3dvcmQiLCJfX3YiLCJmb2xsb3dlZCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJyZXRyaWV2ZVBvc3RzTm90Rm9sbG93ZWQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyBVc2VyLCBQb3N0IH0gPSByZXF1aXJlKCcuLi8uLi9kYXRhL21vZGVscycpXHJcbmNvbnN0IHsgdmFsaWRhdGVJZCB9ID0gcmVxdWlyZSgnLi4vaGVscGVycy92YWxpZGF0b3JzJylcclxuXHJcbmZ1bmN0aW9uIHJldHJpZXZlUG9zdHNOb3RGb2xsb3dlZCh1c2VySWQpIHtcclxuICAgIHZhbGlkYXRlSWQodXNlcklkKVxyXG5cclxuICAgIHJldHVybiBVc2VyLmZpbmRCeUlkKHVzZXJJZCkubGVhbigpXHJcbiAgICAgICAgLnRoZW4odXNlciA9PiB7XHJcbiAgICAgICAgICAgIGlmICghdXNlcikgdGhyb3cgbmV3IEVycm9yKCd1c2VyIG5vdCBmb3VuZCcpXHJcblxyXG4gICAgICAgICAgICBjb25zdCB1c2Vyc0ZvbGxvd2VkID0gdXNlci5mb2xsb3dpbmcgPyB1c2VyLmZvbGxvd2luZyA6IFtdXHJcbiAgICAgICAgICAgIHVzZXJzRm9sbG93ZWQucHVzaCh1c2VyLl9pZClcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbUG9zdC5hZ2dyZWdhdGUoW1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICRtYXRjaDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRob3I6IHsgJG5pbjogdXNlcnNGb2xsb3dlZCB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2FtcGxlOiB7IHNpemU6IDQgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAkbG9va3VwOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyb206IFwidXNlcnNcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxGaWVsZDogXCJhdXRob3JcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWlnbkZpZWxkOiBcIl9pZFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhczogXCJhdXRob3JcIlxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHVud2luZDogXCIkYXV0aG9yXCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgJGxvb2t1cDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmcm9tOiBcInVzZXJzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsRmllbGQ6IFwiY29tbWVudHMuYXV0aG9yXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVpZ25GaWVsZDogXCJfaWRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXM6IFwiYXV0aG9yQ29tbWVudFwiXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAkcHJvamVjdDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogeyAkdG9TdHJpbmc6IFwiJF9pZFwiIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaWtlczogMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJhdXRob3IubmFtZVwiOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImF1dGhvci5pbWFnZVwiOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImF1dGhvci5pZFwiOiB7ICR0b1N0cmluZzogXCIkYXV0aG9yLl9pZFwiIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1lbnRzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbWFwOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IFwiJGNvbW1lbnRzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXM6IFwiY29tbWVudFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dGhvcjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGFycmF5RWxlbUF0OiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZmlsdGVyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dDogXCIkYXV0aG9yQ29tbWVudFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXM6IFwiYXV0aG9yXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25kOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGVxOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiJCRhdXRob3IuX2lkXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiJCRjb21tZW50LmF1dGhvclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBcIiQkY29tbWVudC50ZXh0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IFwiJCRjb21tZW50LmRhdGVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IFwiJCRjb21tZW50Ll9pZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgXSksXHJcbiAgICAgICAgICAgIFVzZXIuZmluZEJ5SWQodXNlcklkKS5sZWFuKCldKVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4oKFtwb3N0cywgdXNlcl0pID0+IHtcclxuICAgICAgICAgICAgaWYgKCFwb3N0cykgdGhyb3cgbmV3IEVycm9yKCdwb3N0cyBub3QgZm91bmQnKVxyXG4gICAgICAgICAgICBpZiAoIXVzZXIpIHRocm93IG5ldyBFcnJvcigndXNlciBub3QgZm91bmQnKVxyXG5cclxuICAgICAgICAgICAgcG9zdHMuZm9yRWFjaChwb3N0ID0+IHtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSBwb3N0Ll9pZFxyXG5cclxuICAgICAgICAgICAgICAgIGlmICghdXNlci5mYXZQb3N0cykgdXNlci5mYXZQb3N0cyA9IFtdXHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgZmF2UG9zdHMgPSB1c2VyLmZhdlBvc3RzLm1hcCgocG9zdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwb3N0LnRvU3RyaW5nKClcclxuICAgICAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICAgICAgcG9zdC5mYXYgPSBmYXZQb3N0cy5pbmNsdWRlcyhwb3N0LmlkKVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChwb3N0LmNvbW1lbnRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zdC5jb21tZW50cy5mb3JFYWNoKGNvbW1lbnQgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29tbWVudC5pZCA9IGNvbW1lbnQuX2lkLnRvU3RyaW5nKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGNvbW1lbnQuX2lkXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29tbWVudC5hdXRob3IuX2lkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21tZW50LmF1dGhvci5pZCA9IGNvbW1lbnQuYXV0aG9yLl9pZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGNvbW1lbnQuYXV0aG9yLl9pZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgY29tbWVudC5hdXRob3IuZGVzY3JpcHRpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGNvbW1lbnQuYXV0aG9yLmVtYWlsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBjb21tZW50LmF1dGhvci5wYXNzd29yZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgY29tbWVudC5hdXRob3IuZmF2UG9zdHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGNvbW1lbnQuYXV0aG9yLl9fdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgY29tbWVudC5hdXRob3IuZm9sbG93aW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBjb21tZW50LmF1dGhvci5mb2xsb3dlZFxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcG9zdHNcclxuICAgICAgICB9KVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHJldHJpZXZlUG9zdHNOb3RGb2xsb3dlZCJdLCJtYXBwaW5ncyI6Im8zS0FlWTtBQUFBQSxjQUFBLFNBQUFBLENBQUEsU0FBQUMsY0FBQSxXQUFBQSxjQUFBLEVBQUFELGNBQUEsR0FmWixLQUFNLENBQUVFLElBQUksQ0FBRUMsSUFBSyxDQUFDLEVBQUFILGNBQUEsR0FBQUksQ0FBQSxNQUFHQyxPQUFPLENBQUMsbUJBQW1CLENBQUMsRUFDbkQsS0FBTSxDQUFFQyxVQUFXLENBQUMsRUFBQU4sY0FBQSxHQUFBSSxDQUFBLE1BQUdDLE9BQU8sQ0FBQyx1QkFBdUIsQ0FBQyxFQUV2RCxRQUFTLENBQUFFLHdCQUF3QkEsQ0FBQ0MsTUFBTSxDQUFFLENBQUFSLGNBQUEsR0FBQVMsQ0FBQSxNQUFBVCxjQUFBLEdBQUFJLENBQUEsTUFDdENFLFVBQVUsQ0FBQ0UsTUFBTSxDQUFDLENBQUFSLGNBQUEsR0FBQUksQ0FBQSxNQUVsQixNQUFPLENBQUFGLElBQUksQ0FBQ1EsUUFBUSxDQUFDRixNQUFNLENBQUMsQ0FBQ0csSUFBSSxDQUFDLENBQUMsQ0FDOUJDLElBQUksQ0FBQ0MsSUFBSSxFQUFJLENBQUFiLGNBQUEsR0FBQVMsQ0FBQSxNQUFBVCxjQUFBLEdBQUFJLENBQUEsTUFDVixHQUFJLENBQUNTLElBQUksQ0FBRSxDQUFBYixjQUFBLEdBQUFjLENBQUEsU0FBQWQsY0FBQSxHQUFBSSxDQUFBLFdBQU0sSUFBSSxDQUFBVyxLQUFLLENBQUMsZ0JBQWdCLENBQUMsQ0FBRCxDQUFDLEtBQUFmLGNBQUEsR0FBQWMsQ0FBQSxVQUU1QyxLQUFNLENBQUFFLGFBQWEsRUFBQWhCLGNBQUEsR0FBQUksQ0FBQSxNQUFHUyxJQUFJLENBQUNJLFNBQVMsRUFBQWpCLGNBQUEsR0FBQWMsQ0FBQSxTQUFHRCxJQUFJLENBQUNJLFNBQVMsR0FBQWpCLGNBQUEsR0FBQWMsQ0FBQSxTQUFHLEVBQUUsR0FBQWQsY0FBQSxHQUFBSSxDQUFBLE1BQzFEWSxhQUFhLENBQUNFLElBQUksQ0FBQ0wsSUFBSSxDQUFDTSxHQUFHLENBQUMsQ0FBQW5CLGNBQUEsR0FBQUksQ0FBQSxNQUU1QixNQUFPLENBQUFnQixPQUFPLENBQUNDLEdBQUcsQ0FBQyxDQUFDbEIsSUFBSSxDQUFDbUIsU0FBUyxDQUFDLENBQy9CLENBQ0lDLE1BQU0sQ0FBRSxDQUNKQyxNQUFNLENBQUUsQ0FBRUMsSUFBSSxDQUFFVCxhQUFjLENBQ2xDLENBQ0osQ0FBQyxDQUNELENBQ0lVLE9BQU8sQ0FBRSxDQUFFQyxJQUFJLENBQUUsQ0FBRSxDQUN2QixDQUFDLENBQ0QsQ0FDSUMsT0FBTyxDQUFFLENBQ0xDLElBQUksQ0FBRSxPQUFPLENBQ2JDLFVBQVUsQ0FBRSxRQUFRLENBQ3BCQyxZQUFZLENBQUUsS0FBSyxDQUNuQkMsRUFBRSxDQUFFLFFBQ1IsQ0FDSixDQUFDLENBQ0QsQ0FDSUMsT0FBTyxDQUFFLFNBQ2IsQ0FBQyxDQUNELENBQ0lMLE9BQU8sQ0FBRSxDQUNMQyxJQUFJLENBQUUsT0FBTyxDQUNiQyxVQUFVLENBQUUsaUJBQWlCLENBQzdCQyxZQUFZLENBQUUsS0FBSyxDQUNuQkMsRUFBRSxDQUFFLGVBQ1IsQ0FDSixDQUFDLENBQ0QsQ0FDSUUsUUFBUSxDQUFFLENBQ05DLEVBQUUsQ0FBRSxDQUFFQyxTQUFTLENBQUUsTUFBTyxDQUFDLENBQ3pCQyxJQUFJLENBQUUsQ0FBQyxDQUNQQyxLQUFLLENBQUUsQ0FBQyxDQUNSQyxLQUFLLENBQUUsQ0FBQyxDQUNSLGFBQWEsQ0FBRSxDQUFDLENBQ2hCLGNBQWMsQ0FBRSxDQUFDLENBQ2pCLFdBQVcsQ0FBRSxDQUFFSCxTQUFTLENBQUUsYUFBYyxDQUFDLENBQ3pDSSxRQUFRLENBQUUsQ0FDTkMsSUFBSSxDQUFFLENBQ0ZDLEtBQUssQ0FBRSxXQUFXLENBQ2xCVixFQUFFLENBQUUsU0FBUyxDQUNiVyxFQUFFLENBQUUsQ0FDQW5CLE1BQU0sQ0FBRSxDQUNKb0IsWUFBWSxDQUFFLENBQ1YsQ0FDSUMsT0FBTyxDQUFFLENBQ0xILEtBQUssQ0FBRSxnQkFBZ0IsQ0FDdkJWLEVBQUUsQ0FBRSxRQUFRLENBQ1pjLElBQUksQ0FBRSxDQUNGQyxHQUFHLENBQUUsQ0FDRCxjQUFjLENBQ2Qsa0JBQWtCLENBRTFCLENBQ0osQ0FDSixDQUFDLENBQ0QsQ0FBQyxDQUVULENBQUMsQ0FDRFYsSUFBSSxDQUFFLGdCQUFnQixDQUN0QlcsSUFBSSxDQUFFLGdCQUFnQixDQUN0QmIsRUFBRSxDQUFFLGVBQ1IsQ0FDSixDQUNKLENBQ0osQ0FDSixDQUFDLENBQ0osQ0FBQyxDQUNGakMsSUFBSSxDQUFDUSxRQUFRLENBQUNGLE1BQU0sQ0FBQyxDQUFDRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FDbEMsQ0FBQyxDQUFDLENBQ0RDLElBQUksQ0FBQyxDQUFDLENBQUNxQyxLQUFLLENBQUVwQyxJQUFJLENBQUMsR0FBSyxDQUFBYixjQUFBLEdBQUFTLENBQUEsTUFBQVQsY0FBQSxHQUFBSSxDQUFBLE1BQ3JCLEdBQUksQ0FBQzZDLEtBQUssQ0FBRSxDQUFBakQsY0FBQSxHQUFBYyxDQUFBLFNBQUFkLGNBQUEsR0FBQUksQ0FBQSxZQUFNLElBQUksQ0FBQVcsS0FBSyxDQUFDLGlCQUFpQixDQUFDLENBQUQsQ0FBQyxLQUFBZixjQUFBLEdBQUFjLENBQUEsVUFBQWQsY0FBQSxHQUFBSSxDQUFBLE9BQzlDLEdBQUksQ0FBQ1MsSUFBSSxDQUFFLENBQUFiLGNBQUEsR0FBQWMsQ0FBQSxTQUFBZCxjQUFBLEdBQUFJLENBQUEsWUFBTSxJQUFJLENBQUFXLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFELENBQUMsS0FBQWYsY0FBQSxHQUFBYyxDQUFBLFVBQUFkLGNBQUEsR0FBQUksQ0FBQSxPQUU1QzZDLEtBQUssQ0FBQ0MsT0FBTyxDQUFDQyxJQUFJLEVBQUksQ0FBQW5ELGNBQUEsR0FBQVMsQ0FBQSxNQUFBVCxjQUFBLEdBQUFJLENBQUEsT0FDbEIsTUFBTyxDQUFBK0MsSUFBSSxDQUFDaEMsR0FBRyxDQUFBbkIsY0FBQSxHQUFBSSxDQUFBLE9BRWYsR0FBSSxDQUFDUyxJQUFJLENBQUN1QyxRQUFRLENBQUUsQ0FBQXBELGNBQUEsR0FBQWMsQ0FBQSxTQUFBZCxjQUFBLEdBQUFJLENBQUEsT0FBQVMsSUFBSSxDQUFDdUMsUUFBUSxDQUFHLEVBQUUsQ0FBRCxDQUFDLEtBQUFwRCxjQUFBLEdBQUFjLENBQUEsVUFFdEMsS0FBTSxDQUFBc0MsUUFBUSxFQUFBcEQsY0FBQSxHQUFBSSxDQUFBLE9BQUdTLElBQUksQ0FBQ3VDLFFBQVEsQ0FBQ0MsR0FBRyxDQUFFRixJQUFJLEVBQUssQ0FBQW5ELGNBQUEsR0FBQVMsQ0FBQSxNQUFBVCxjQUFBLEdBQUFJLENBQUEsT0FDekMsTUFBTyxDQUFBK0MsSUFBSSxDQUFDRyxRQUFRLENBQUMsQ0FBQyxDQUMxQixDQUFDLENBQUMsRUFBQXRELGNBQUEsR0FBQUksQ0FBQSxPQUVGK0MsSUFBSSxDQUFDSSxHQUFHLENBQUdILFFBQVEsQ0FBQ0ksUUFBUSxDQUFDTCxJQUFJLENBQUNoQixFQUFFLENBQUMsQ0FBQW5DLGNBQUEsR0FBQUksQ0FBQSxPQUVyQyxHQUFJK0MsSUFBSSxDQUFDWCxRQUFRLENBQUUsQ0FBQXhDLGNBQUEsR0FBQWMsQ0FBQSxTQUFBZCxjQUFBLEdBQUFJLENBQUEsT0FDZitDLElBQUksQ0FBQ1gsUUFBUSxDQUFDVSxPQUFPLENBQUNPLE9BQU8sRUFBSSxDQUFBekQsY0FBQSxHQUFBUyxDQUFBLE1BQUFULGNBQUEsR0FBQUksQ0FBQSxPQUU3QnFELE9BQU8sQ0FBQ3RCLEVBQUUsQ0FBR3NCLE9BQU8sQ0FBQ3RDLEdBQUcsQ0FBQ21DLFFBQVEsQ0FBQyxDQUFDLENBQUF0RCxjQUFBLEdBQUFJLENBQUEsT0FDbkMsTUFBTyxDQUFBcUQsT0FBTyxDQUFDdEMsR0FBRyxDQUFBbkIsY0FBQSxHQUFBSSxDQUFBLE9BRWxCLEdBQUlxRCxPQUFPLENBQUNqQyxNQUFNLENBQUNMLEdBQUcsQ0FBRSxDQUFBbkIsY0FBQSxHQUFBYyxDQUFBLFNBQUFkLGNBQUEsR0FBQUksQ0FBQSxPQUNwQnFELE9BQU8sQ0FBQ2pDLE1BQU0sQ0FBQ1csRUFBRSxDQUFHc0IsT0FBTyxDQUFDakMsTUFBTSxDQUFDTCxHQUFHLENBQUFuQixjQUFBLEdBQUFJLENBQUEsT0FDdEMsTUFBTyxDQUFBcUQsT0FBTyxDQUFDakMsTUFBTSxDQUFDTCxHQUFHLENBQzdCLENBQUMsS0FBQW5CLGNBQUEsR0FBQWMsQ0FBQSxVQUFBZCxjQUFBLEdBQUFJLENBQUEsT0FFRCxNQUFPLENBQUFxRCxPQUFPLENBQUNqQyxNQUFNLENBQUNrQyxXQUFXLENBQUExRCxjQUFBLEdBQUFJLENBQUEsT0FDakMsTUFBTyxDQUFBcUQsT0FBTyxDQUFDakMsTUFBTSxDQUFDbUMsS0FBSyxDQUFBM0QsY0FBQSxHQUFBSSxDQUFBLE9BQzNCLE1BQU8sQ0FBQXFELE9BQU8sQ0FBQ2pDLE1BQU0sQ0FBQ29DLFFBQVEsQ0FBQTVELGNBQUEsR0FBQUksQ0FBQSxPQUM5QixNQUFPLENBQUFxRCxPQUFPLENBQUNqQyxNQUFNLENBQUM0QixRQUFRLENBQUFwRCxjQUFBLEdBQUFJLENBQUEsT0FDOUIsTUFBTyxDQUFBcUQsT0FBTyxDQUFDakMsTUFBTSxDQUFDcUMsR0FBRyxDQUFBN0QsY0FBQSxHQUFBSSxDQUFBLE9BQ3pCLE1BQU8sQ0FBQXFELE9BQU8sQ0FBQ2pDLE1BQU0sQ0FBQ1AsU0FBUyxDQUFBakIsY0FBQSxHQUFBSSxDQUFBLE9BQy9CLE1BQU8sQ0FBQXFELE9BQU8sQ0FBQ2pDLE1BQU0sQ0FBQ3NDLFFBQVEsQ0FDbEMsQ0FBQyxDQUFDLENBQ04sQ0FBQyxLQUFBOUQsY0FBQSxHQUFBYyxDQUFBLFVBQ0wsQ0FBQyxDQUFDLENBQUFkLGNBQUEsR0FBQUksQ0FBQSxPQUVGLE1BQU8sQ0FBQTZDLEtBQUssQ0FDaEIsQ0FBQyxDQUFDLENBQ1YsQ0FBQ2pELGNBQUEsR0FBQUksQ0FBQSxPQUVEMkQsTUFBTSxDQUFDQyxPQUFPLENBQUd6RCx3QkFBd0IifQ==