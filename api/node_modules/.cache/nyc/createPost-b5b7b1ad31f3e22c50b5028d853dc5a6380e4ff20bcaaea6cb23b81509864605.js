function cov_vm0t9bout(){var path="C:\\Users\\loco8\\workspace\\eurofirms-bootcamp-202305\\staff\\manuel-david-castillo\\instaflan-fullstack\\api\\logic\\post-logic\\createPost.js";var hash="d1480b304c458d32b545aa03b2ba620498d457e6";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\loco8\\workspace\\eurofirms-bootcamp-202305\\staff\\manuel-david-castillo\\instaflan-fullstack\\api\\logic\\post-logic\\createPost.js",statementMap:{"0":{start:{line:1,column:48},end:{line:1,column:80}},"1":{start:{line:2,column:21},end:{line:2,column:49}},"2":{start:{line:5,column:4},end:{line:5,column:22}},"3":{start:{line:6,column:4},end:{line:6,column:22}},"4":{start:{line:7,column:4},end:{line:7,column:22}},"5":{start:{line:9,column:4},end:{line:20,column:17}},"6":{start:{line:11,column:8},end:{line:11,column:54}},"7":{start:{line:11,column:18},end:{line:11,column:54}},"8":{start:{line:13,column:23},end:{line:13,column:31}},"9":{start:{line:14,column:21},end:{line:14,column:31}},"10":{start:{line:15,column:22},end:{line:15,column:23}},"11":{start:{line:16,column:25},end:{line:16,column:27}},"12":{start:{line:18,column:8},end:{line:18,column:72}},"13":{start:{line:23,column:0},end:{line:23,column:27}}},fnMap:{"0":{name:"createPost",decl:{start:{line:4,column:9},end:{line:4,column:19}},loc:{start:{line:4,column:41},end:{line:21,column:1}},line:4},"1":{name:"(anonymous_1)",decl:{start:{line:10,column:10},end:{line:10,column:11}},loc:{start:{line:10,column:18},end:{line:19,column:9}},line:10},"2":{name:"(anonymous_2)",decl:{start:{line:20,column:10},end:{line:20,column:11}},loc:{start:{line:20,column:14},end:{line:20,column:16}},line:20}},branchMap:{"0":{loc:{start:{line:11,column:8},end:{line:11,column:54}},type:"if",locations:[{start:{line:11,column:8},end:{line:11,column:54}},{start:{line:11,column:8},end:{line:11,column:54}}],line:11}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d1480b304c458d32b545aa03b2ba620498d457e6"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_vm0t9bout=function(){return actualCoverage;};}return actualCoverage;}cov_vm0t9bout();const{validateId,validateUrl,validateText}=(cov_vm0t9bout().s[0]++,require('../helpers/validators'));const{User,Post}=(cov_vm0t9bout().s[1]++,require('../../data/models'));function createPost(userId,image,text){cov_vm0t9bout().f[0]++;cov_vm0t9bout().s[2]++;validateId(userId);cov_vm0t9bout().s[3]++;validateUrl(image);cov_vm0t9bout().s[4]++;validateText(text);cov_vm0t9bout().s[5]++;return User.findById(userId).then(user=>{cov_vm0t9bout().f[1]++;cov_vm0t9bout().s[6]++;if(!user){cov_vm0t9bout().b[0][0]++;cov_vm0t9bout().s[7]++;throw new Error('userId not found');}else{cov_vm0t9bout().b[0][1]++;}const author=(cov_vm0t9bout().s[8]++,user._id);const date=(cov_vm0t9bout().s[9]++,new Date());const likes=(cov_vm0t9bout().s[10]++,0);const comments=(cov_vm0t9bout().s[11]++,[]);cov_vm0t9bout().s[12]++;return Post.create({author,image,text,likes,date,comments});}).then(()=>{cov_vm0t9bout().f[2]++;});}cov_vm0t9bout().s[13]++;module.exports=createPost;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3Zfdm0wdDlib3V0IiwiYWN0dWFsQ292ZXJhZ2UiLCJ2YWxpZGF0ZUlkIiwidmFsaWRhdGVVcmwiLCJ2YWxpZGF0ZVRleHQiLCJzIiwicmVxdWlyZSIsIlVzZXIiLCJQb3N0IiwiY3JlYXRlUG9zdCIsInVzZXJJZCIsImltYWdlIiwidGV4dCIsImYiLCJmaW5kQnlJZCIsInRoZW4iLCJ1c2VyIiwiYiIsIkVycm9yIiwiYXV0aG9yIiwiX2lkIiwiZGF0ZSIsIkRhdGUiLCJsaWtlcyIsImNvbW1lbnRzIiwiY3JlYXRlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbImNyZWF0ZVBvc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qge3ZhbGlkYXRlSWQsIHZhbGlkYXRlVXJsLCB2YWxpZGF0ZVRleHR9ID0gcmVxdWlyZSgnLi4vaGVscGVycy92YWxpZGF0b3JzJylcclxuY29uc3Qge1VzZXIsIFBvc3R9ID0gcmVxdWlyZSgnLi4vLi4vZGF0YS9tb2RlbHMnKVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlUG9zdCh1c2VySWQsIGltYWdlLCB0ZXh0KSB7XHJcbiAgICB2YWxpZGF0ZUlkKHVzZXJJZClcclxuICAgIHZhbGlkYXRlVXJsKGltYWdlKVxyXG4gICAgdmFsaWRhdGVUZXh0KHRleHQpXHJcblxyXG4gICAgcmV0dXJuIFVzZXIuZmluZEJ5SWQodXNlcklkKSBcclxuICAgIC50aGVuKHVzZXIgPT4ge1xyXG4gICAgICAgIGlmKCF1c2VyKSB0aHJvdyBuZXcgRXJyb3IgKCd1c2VySWQgbm90IGZvdW5kJylcclxuXHJcbiAgICAgICAgY29uc3QgYXV0aG9yID0gdXNlci5faWRcclxuICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoKVxyXG4gICAgICAgIGNvbnN0IGxpa2VzID0gMFxyXG4gICAgICAgIGNvbnN0IGNvbW1lbnRzID0gW11cclxuXHJcbiAgICAgICAgcmV0dXJuIFBvc3QuY3JlYXRlKHthdXRob3IsIGltYWdlLCB0ZXh0LCBsaWtlcywgZGF0ZSwgY29tbWVudHN9KVxyXG4gICAgICAgIH0pXHJcbiAgICAudGhlbigoKT0+e30pXHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gY3JlYXRlUG9zdCJdLCJtYXBwaW5ncyI6Imt2RUFlWTtBQUFBQSxhQUFBLFNBQUFBLENBQUEsU0FBQUMsY0FBQSxXQUFBQSxjQUFBLEVBQUFELGFBQUEsR0FmWixLQUFNLENBQUNFLFVBQVUsQ0FBRUMsV0FBVyxDQUFFQyxZQUFZLENBQUMsRUFBQUosYUFBQSxHQUFBSyxDQUFBLE1BQUdDLE9BQU8sQ0FBQyx1QkFBdUIsQ0FBQyxFQUNoRixLQUFNLENBQUNDLElBQUksQ0FBRUMsSUFBSSxDQUFDLEVBQUFSLGFBQUEsR0FBQUssQ0FBQSxNQUFHQyxPQUFPLENBQUMsbUJBQW1CLENBQUMsRUFFakQsUUFBUyxDQUFBRyxVQUFVQSxDQUFDQyxNQUFNLENBQUVDLEtBQUssQ0FBRUMsSUFBSSxDQUFFLENBQUFaLGFBQUEsR0FBQWEsQ0FBQSxNQUFBYixhQUFBLEdBQUFLLENBQUEsTUFDckNILFVBQVUsQ0FBQ1EsTUFBTSxDQUFDLENBQUFWLGFBQUEsR0FBQUssQ0FBQSxNQUNsQkYsV0FBVyxDQUFDUSxLQUFLLENBQUMsQ0FBQVgsYUFBQSxHQUFBSyxDQUFBLE1BQ2xCRCxZQUFZLENBQUNRLElBQUksQ0FBQyxDQUFBWixhQUFBLEdBQUFLLENBQUEsTUFFbEIsTUFBTyxDQUFBRSxJQUFJLENBQUNPLFFBQVEsQ0FBQ0osTUFBTSxDQUFDLENBQzNCSyxJQUFJLENBQUNDLElBQUksRUFBSSxDQUFBaEIsYUFBQSxHQUFBYSxDQUFBLE1BQUFiLGFBQUEsR0FBQUssQ0FBQSxNQUNWLEdBQUcsQ0FBQ1csSUFBSSxDQUFFLENBQUFoQixhQUFBLEdBQUFpQixDQUFBLFNBQUFqQixhQUFBLEdBQUFLLENBQUEsV0FBTSxJQUFJLENBQUFhLEtBQUssQ0FBRSxrQkFBa0IsQ0FBQyxDQUFELENBQUMsS0FBQWxCLGFBQUEsR0FBQWlCLENBQUEsVUFFOUMsS0FBTSxDQUFBRSxNQUFNLEVBQUFuQixhQUFBLEdBQUFLLENBQUEsTUFBR1csSUFBSSxDQUFDSSxHQUFHLEVBQ3ZCLEtBQU0sQ0FBQUMsSUFBSSxFQUFBckIsYUFBQSxHQUFBSyxDQUFBLE1BQUcsR0FBSSxDQUFBaUIsSUFBSSxDQUFDLENBQUMsRUFDdkIsS0FBTSxDQUFBQyxLQUFLLEVBQUF2QixhQUFBLEdBQUFLLENBQUEsT0FBRyxDQUFDLEVBQ2YsS0FBTSxDQUFBbUIsUUFBUSxFQUFBeEIsYUFBQSxHQUFBSyxDQUFBLE9BQUcsRUFBRSxFQUFBTCxhQUFBLEdBQUFLLENBQUEsT0FFbkIsTUFBTyxDQUFBRyxJQUFJLENBQUNpQixNQUFNLENBQUMsQ0FBQ04sTUFBTSxDQUFFUixLQUFLLENBQUVDLElBQUksQ0FBRVcsS0FBSyxDQUFFRixJQUFJLENBQUVHLFFBQVEsQ0FBQyxDQUFDLENBQ2hFLENBQUMsQ0FBQyxDQUNMVCxJQUFJLENBQUMsSUFBSSxDQUFBZixhQUFBLEdBQUFhLENBQUEsTUFBQyxDQUFDLENBQUMsQ0FDakIsQ0FBQ2IsYUFBQSxHQUFBSyxDQUFBLE9BRURxQixNQUFNLENBQUNDLE9BQU8sQ0FBR2xCLFVBQVUifQ==