function cov_vm0t9bout(){var path="C:\\Users\\loco8\\workspace\\eurofirms-bootcamp-202305\\staff\\manuel-david-castillo\\instaflan-fullstack\\api\\logic\\post-logic\\createPost.js";var hash="9729e5fe867855cdd0e00572713faf75ff6f429d";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\loco8\\workspace\\eurofirms-bootcamp-202305\\staff\\manuel-david-castillo\\instaflan-fullstack\\api\\logic\\post-logic\\createPost.js",statementMap:{"0":{start:{line:1,column:52},end:{line:1,column:84}},"1":{start:{line:2,column:23},end:{line:2,column:51}},"2":{start:{line:5,column:4},end:{line:5,column:22}},"3":{start:{line:6,column:4},end:{line:6,column:24}},"4":{start:{line:7,column:4},end:{line:7,column:22}},"5":{start:{line:9,column:4},end:{line:20,column:24}},"6":{start:{line:11,column:12},end:{line:11,column:56}},"7":{start:{line:11,column:23},end:{line:11,column:56}},"8":{start:{line:13,column:27},end:{line:13,column:35}},"9":{start:{line:14,column:25},end:{line:14,column:35}},"10":{start:{line:15,column:26},end:{line:15,column:27}},"11":{start:{line:16,column:29},end:{line:16,column:31}},"12":{start:{line:18,column:12},end:{line:18,column:78}},"13":{start:{line:23,column:0},end:{line:23,column:27}}},fnMap:{"0":{name:"createPost",decl:{start:{line:4,column:9},end:{line:4,column:19}},loc:{start:{line:4,column:41},end:{line:21,column:1}},line:4},"1":{name:"(anonymous_1)",decl:{start:{line:10,column:14},end:{line:10,column:15}},loc:{start:{line:10,column:22},end:{line:19,column:9}},line:10},"2":{name:"(anonymous_2)",decl:{start:{line:20,column:14},end:{line:20,column:15}},loc:{start:{line:20,column:20},end:{line:20,column:23}},line:20}},branchMap:{"0":{loc:{start:{line:11,column:12},end:{line:11,column:56}},type:"if",locations:[{start:{line:11,column:12},end:{line:11,column:56}},{start:{line:11,column:12},end:{line:11,column:56}}],line:11}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9729e5fe867855cdd0e00572713faf75ff6f429d"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_vm0t9bout=function(){return actualCoverage;};}return actualCoverage;}cov_vm0t9bout();const{validateId,validateImage,validateText}=(cov_vm0t9bout().s[0]++,require('../helpers/validators'));const{User,Post}=(cov_vm0t9bout().s[1]++,require('../../data/models'));function createPost(userId,image,text){cov_vm0t9bout().f[0]++;cov_vm0t9bout().s[2]++;validateId(userId);cov_vm0t9bout().s[3]++;validateImage(image);cov_vm0t9bout().s[4]++;validateText(text);cov_vm0t9bout().s[5]++;return User.findById(userId).then(user=>{cov_vm0t9bout().f[1]++;cov_vm0t9bout().s[6]++;if(!user){cov_vm0t9bout().b[0][0]++;cov_vm0t9bout().s[7]++;throw new Error('user not found');}else{cov_vm0t9bout().b[0][1]++;}const author=(cov_vm0t9bout().s[8]++,user._id);const date=(cov_vm0t9bout().s[9]++,new Date());const likes=(cov_vm0t9bout().s[10]++,0);const comments=(cov_vm0t9bout().s[11]++,[]);cov_vm0t9bout().s[12]++;return Post.create({author,image,text,likes,date,comments});}).then(()=>{cov_vm0t9bout().f[2]++;});}cov_vm0t9bout().s[13]++;module.exports=createPost;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3Zfdm0wdDlib3V0IiwiYWN0dWFsQ292ZXJhZ2UiLCJ2YWxpZGF0ZUlkIiwidmFsaWRhdGVJbWFnZSIsInZhbGlkYXRlVGV4dCIsInMiLCJyZXF1aXJlIiwiVXNlciIsIlBvc3QiLCJjcmVhdGVQb3N0IiwidXNlcklkIiwiaW1hZ2UiLCJ0ZXh0IiwiZiIsImZpbmRCeUlkIiwidGhlbiIsInVzZXIiLCJiIiwiRXJyb3IiLCJhdXRob3IiLCJfaWQiLCJkYXRlIiwiRGF0ZSIsImxpa2VzIiwiY29tbWVudHMiLCJjcmVhdGUiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiY3JlYXRlUG9zdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IHZhbGlkYXRlSWQsIHZhbGlkYXRlSW1hZ2UsIHZhbGlkYXRlVGV4dCB9ID0gcmVxdWlyZSgnLi4vaGVscGVycy92YWxpZGF0b3JzJylcclxuY29uc3QgeyBVc2VyLCBQb3N0IH0gPSByZXF1aXJlKCcuLi8uLi9kYXRhL21vZGVscycpXHJcblxyXG5mdW5jdGlvbiBjcmVhdGVQb3N0KHVzZXJJZCwgaW1hZ2UsIHRleHQpIHtcclxuICAgIHZhbGlkYXRlSWQodXNlcklkKVxyXG4gICAgdmFsaWRhdGVJbWFnZShpbWFnZSlcclxuICAgIHZhbGlkYXRlVGV4dCh0ZXh0KVxyXG5cclxuICAgIHJldHVybiBVc2VyLmZpbmRCeUlkKHVzZXJJZClcclxuICAgICAgICAudGhlbih1c2VyID0+IHtcclxuICAgICAgICAgICAgaWYgKCF1c2VyKSB0aHJvdyBuZXcgRXJyb3IoJ3VzZXIgbm90IGZvdW5kJylcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGF1dGhvciA9IHVzZXIuX2lkXHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSgpXHJcbiAgICAgICAgICAgIGNvbnN0IGxpa2VzID0gMFxyXG4gICAgICAgICAgICBjb25zdCBjb21tZW50cyA9IFtdXHJcblxyXG4gICAgICAgICAgICByZXR1cm4gUG9zdC5jcmVhdGUoeyBhdXRob3IsIGltYWdlLCB0ZXh0LCBsaWtlcywgZGF0ZSwgY29tbWVudHMgfSlcclxuICAgICAgICB9KVxyXG4gICAgICAgIC50aGVuKCgpID0+IHsgfSlcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBjcmVhdGVQb3N0Il0sIm1hcHBpbmdzIjoidXZFQWVZO0FBQUFBLGFBQUEsU0FBQUEsQ0FBQSxTQUFBQyxjQUFBLFdBQUFBLGNBQUEsRUFBQUQsYUFBQSxHQWZaLEtBQU0sQ0FBRUUsVUFBVSxDQUFFQyxhQUFhLENBQUVDLFlBQWEsQ0FBQyxFQUFBSixhQUFBLEdBQUFLLENBQUEsTUFBR0MsT0FBTyxDQUFDLHVCQUF1QixDQUFDLEVBQ3BGLEtBQU0sQ0FBRUMsSUFBSSxDQUFFQyxJQUFLLENBQUMsRUFBQVIsYUFBQSxHQUFBSyxDQUFBLE1BQUdDLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxFQUVuRCxRQUFTLENBQUFHLFVBQVVBLENBQUNDLE1BQU0sQ0FBRUMsS0FBSyxDQUFFQyxJQUFJLENBQUUsQ0FBQVosYUFBQSxHQUFBYSxDQUFBLE1BQUFiLGFBQUEsR0FBQUssQ0FBQSxNQUNyQ0gsVUFBVSxDQUFDUSxNQUFNLENBQUMsQ0FBQVYsYUFBQSxHQUFBSyxDQUFBLE1BQ2xCRixhQUFhLENBQUNRLEtBQUssQ0FBQyxDQUFBWCxhQUFBLEdBQUFLLENBQUEsTUFDcEJELFlBQVksQ0FBQ1EsSUFBSSxDQUFDLENBQUFaLGFBQUEsR0FBQUssQ0FBQSxNQUVsQixNQUFPLENBQUFFLElBQUksQ0FBQ08sUUFBUSxDQUFDSixNQUFNLENBQUMsQ0FDdkJLLElBQUksQ0FBQ0MsSUFBSSxFQUFJLENBQUFoQixhQUFBLEdBQUFhLENBQUEsTUFBQWIsYUFBQSxHQUFBSyxDQUFBLE1BQ1YsR0FBSSxDQUFDVyxJQUFJLENBQUUsQ0FBQWhCLGFBQUEsR0FBQWlCLENBQUEsU0FBQWpCLGFBQUEsR0FBQUssQ0FBQSxXQUFNLElBQUksQ0FBQWEsS0FBSyxDQUFDLGdCQUFnQixDQUFDLENBQUQsQ0FBQyxLQUFBbEIsYUFBQSxHQUFBaUIsQ0FBQSxVQUU1QyxLQUFNLENBQUFFLE1BQU0sRUFBQW5CLGFBQUEsR0FBQUssQ0FBQSxNQUFHVyxJQUFJLENBQUNJLEdBQUcsRUFDdkIsS0FBTSxDQUFBQyxJQUFJLEVBQUFyQixhQUFBLEdBQUFLLENBQUEsTUFBRyxHQUFJLENBQUFpQixJQUFJLENBQUMsQ0FBQyxFQUN2QixLQUFNLENBQUFDLEtBQUssRUFBQXZCLGFBQUEsR0FBQUssQ0FBQSxPQUFHLENBQUMsRUFDZixLQUFNLENBQUFtQixRQUFRLEVBQUF4QixhQUFBLEdBQUFLLENBQUEsT0FBRyxFQUFFLEVBQUFMLGFBQUEsR0FBQUssQ0FBQSxPQUVuQixNQUFPLENBQUFHLElBQUksQ0FBQ2lCLE1BQU0sQ0FBQyxDQUFFTixNQUFNLENBQUVSLEtBQUssQ0FBRUMsSUFBSSxDQUFFVyxLQUFLLENBQUVGLElBQUksQ0FBRUcsUUFBUyxDQUFDLENBQUMsQ0FDdEUsQ0FBQyxDQUFDLENBQ0RULElBQUksQ0FBQyxJQUFNLENBQUFmLGFBQUEsR0FBQWEsQ0FBQSxNQUFFLENBQUMsQ0FBQyxDQUN4QixDQUFDYixhQUFBLEdBQUFLLENBQUEsT0FFRHFCLE1BQU0sQ0FBQ0MsT0FBTyxDQUFHbEIsVUFBVSJ9