function cov_eg41rv11k(){var path="C:\\Users\\loco8\\workspace\\eurofirms-bootcamp-202305\\staff\\manuel-david-castillo\\instaflan-fullstack\\api\\logic\\notifications-logic\\deleteNotification.js";var hash="6935d34d86b30de06f2987923046dbf1749d6fdb";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\loco8\\workspace\\eurofirms-bootcamp-202305\\staff\\manuel-david-castillo\\instaflan-fullstack\\api\\logic\\notifications-logic\\deleteNotification.js",statementMap:{"0":{start:{line:1,column:23},end:{line:1,column:55}},"1":{start:{line:2,column:17},end:{line:2,column:45}},"2":{start:{line:5,column:4},end:{line:5,column:22}},"3":{start:{line:6,column:4},end:{line:6,column:30}},"4":{start:{line:8,column:4},end:{line:19,column:24}},"5":{start:{line:10,column:12},end:{line:10,column:56}},"6":{start:{line:10,column:23},end:{line:10,column:56}},"7":{start:{line:12,column:26},end:{line:12,column:118}},"8":{start:{line:12,column:71},end:{line:12,column:117}},"9":{start:{line:14,column:12},end:{line:15,column:56}},"10":{start:{line:14,column:30},end:{line:14,column:71}},"11":{start:{line:15,column:19},end:{line:15,column:54}},"12":{start:{line:17,column:12},end:{line:17,column:23}},"13":{start:{line:22,column:0},end:{line:22,column:35}}},fnMap:{"0":{name:"deleteNotification",decl:{start:{line:4,column:9},end:{line:4,column:27}},loc:{start:{line:4,column:52},end:{line:20,column:1}},line:4},"1":{name:"(anonymous_1)",decl:{start:{line:9,column:14},end:{line:9,column:15}},loc:{start:{line:9,column:22},end:{line:18,column:9}},line:9},"2":{name:"(anonymous_2)",decl:{start:{line:12,column:55},end:{line:12,column:56}},loc:{start:{line:12,column:71},end:{line:12,column:117}},line:12},"3":{name:"(anonymous_3)",decl:{start:{line:19,column:14},end:{line:19,column:15}},loc:{start:{line:19,column:20},end:{line:19,column:23}},line:19}},branchMap:{"0":{loc:{start:{line:10,column:12},end:{line:10,column:56}},type:"if",locations:[{start:{line:10,column:12},end:{line:10,column:56}},{start:{line:10,column:12},end:{line:10,column:56}}],line:10},"1":{loc:{start:{line:14,column:12},end:{line:15,column:56}},type:"if",locations:[{start:{line:14,column:12},end:{line:15,column:56}},{start:{line:14,column:12},end:{line:15,column:56}}],line:14}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},f:{"0":0,"1":0,"2":0,"3":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6935d34d86b30de06f2987923046dbf1749d6fdb"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_eg41rv11k=function(){return actualCoverage;};}return actualCoverage;}cov_eg41rv11k();const{validateId}=(cov_eg41rv11k().s[0]++,require("../helpers/validators"));const{User}=(cov_eg41rv11k().s[1]++,require("../../data/models"));function deleteNotification(userId,notificationId){cov_eg41rv11k().f[0]++;cov_eg41rv11k().s[2]++;validateId(userId);cov_eg41rv11k().s[3]++;validateId(notificationId);cov_eg41rv11k().s[4]++;return User.findById(userId,'-__v').then(user=>{cov_eg41rv11k().f[1]++;cov_eg41rv11k().s[5]++;if(!user){cov_eg41rv11k().b[0][0]++;cov_eg41rv11k().s[6]++;throw new Error('user not found');}else{cov_eg41rv11k().b[0][1]++;}const index=(cov_eg41rv11k().s[7]++,user.notifications.findIndex(notification=>{cov_eg41rv11k().f[2]++;cov_eg41rv11k().s[8]++;return notification._id.toString()===notificationId;}));cov_eg41rv11k().s[9]++;if(index===-1){cov_eg41rv11k().b[1][0]++;cov_eg41rv11k().s[10]++;throw new Error('notification not found');}else{cov_eg41rv11k().b[1][1]++;cov_eg41rv11k().s[11]++;user.notifications.splice(index,1);}cov_eg41rv11k().s[12]++;user.save();}).then(()=>{cov_eg41rv11k().f[3]++;});}cov_eg41rv11k().s[13]++;module.exports=deleteNotification;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfZWc0MXJ2MTFrIiwiYWN0dWFsQ292ZXJhZ2UiLCJ2YWxpZGF0ZUlkIiwicyIsInJlcXVpcmUiLCJVc2VyIiwiZGVsZXRlTm90aWZpY2F0aW9uIiwidXNlcklkIiwibm90aWZpY2F0aW9uSWQiLCJmIiwiZmluZEJ5SWQiLCJ0aGVuIiwidXNlciIsImIiLCJFcnJvciIsImluZGV4Iiwibm90aWZpY2F0aW9ucyIsImZpbmRJbmRleCIsIm5vdGlmaWNhdGlvbiIsIl9pZCIsInRvU3RyaW5nIiwic3BsaWNlIiwic2F2ZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJkZWxldGVOb3RpZmljYXRpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyB2YWxpZGF0ZUlkIH0gPSByZXF1aXJlKFwiLi4vaGVscGVycy92YWxpZGF0b3JzXCIpXHJcbmNvbnN0IHsgVXNlciB9ID0gcmVxdWlyZShcIi4uLy4uL2RhdGEvbW9kZWxzXCIpXHJcblxyXG5mdW5jdGlvbiBkZWxldGVOb3RpZmljYXRpb24odXNlcklkLCBub3RpZmljYXRpb25JZCkge1xyXG4gICAgdmFsaWRhdGVJZCh1c2VySWQpXHJcbiAgICB2YWxpZGF0ZUlkKG5vdGlmaWNhdGlvbklkKVxyXG5cclxuICAgIHJldHVybiBVc2VyLmZpbmRCeUlkKHVzZXJJZCwgJy1fX3YnKVxyXG4gICAgICAgIC50aGVuKHVzZXIgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIXVzZXIpIHRocm93IG5ldyBFcnJvcigndXNlciBub3QgZm91bmQnKVxyXG5cclxuICAgICAgICAgICAgY29uc3QgaW5kZXggPSB1c2VyLm5vdGlmaWNhdGlvbnMuZmluZEluZGV4KG5vdGlmaWNhdGlvbiA9PiBub3RpZmljYXRpb24uX2lkLnRvU3RyaW5nKCkgPT09IG5vdGlmaWNhdGlvbklkKVxyXG5cclxuICAgICAgICAgICAgaWYgKGluZGV4ID09PSAtMSkgdGhyb3cgbmV3IEVycm9yKCdub3RpZmljYXRpb24gbm90IGZvdW5kJylcclxuICAgICAgICAgICAgZWxzZSB7IHVzZXIubm90aWZpY2F0aW9ucy5zcGxpY2UoaW5kZXgsIDEpIH1cclxuXHJcbiAgICAgICAgICAgIHVzZXIuc2F2ZSgpXHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGhlbigoKSA9PiB7IH0pXHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZGVsZXRlTm90aWZpY2F0aW9uIl0sIm1hcHBpbmdzIjoiMm9GQWVZO0FBQUFBLGFBQUEsU0FBQUEsQ0FBQSxTQUFBQyxjQUFBLFdBQUFBLGNBQUEsRUFBQUQsYUFBQSxHQWZaLEtBQU0sQ0FBRUUsVUFBVyxDQUFDLEVBQUFGLGFBQUEsR0FBQUcsQ0FBQSxNQUFHQyxPQUFPLENBQUMsdUJBQXVCLENBQUMsRUFDdkQsS0FBTSxDQUFFQyxJQUFLLENBQUMsRUFBQUwsYUFBQSxHQUFBRyxDQUFBLE1BQUdDLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxFQUU3QyxRQUFTLENBQUFFLGtCQUFrQkEsQ0FBQ0MsTUFBTSxDQUFFQyxjQUFjLENBQUUsQ0FBQVIsYUFBQSxHQUFBUyxDQUFBLE1BQUFULGFBQUEsR0FBQUcsQ0FBQSxNQUNoREQsVUFBVSxDQUFDSyxNQUFNLENBQUMsQ0FBQVAsYUFBQSxHQUFBRyxDQUFBLE1BQ2xCRCxVQUFVLENBQUNNLGNBQWMsQ0FBQyxDQUFBUixhQUFBLEdBQUFHLENBQUEsTUFFMUIsTUFBTyxDQUFBRSxJQUFJLENBQUNLLFFBQVEsQ0FBQ0gsTUFBTSxDQUFFLE1BQU0sQ0FBQyxDQUMvQkksSUFBSSxDQUFDQyxJQUFJLEVBQUksQ0FBQVosYUFBQSxHQUFBUyxDQUFBLE1BQUFULGFBQUEsR0FBQUcsQ0FBQSxNQUNWLEdBQUksQ0FBQ1MsSUFBSSxDQUFFLENBQUFaLGFBQUEsR0FBQWEsQ0FBQSxTQUFBYixhQUFBLEdBQUFHLENBQUEsV0FBTSxJQUFJLENBQUFXLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFELENBQUMsS0FBQWQsYUFBQSxHQUFBYSxDQUFBLFVBRTVDLEtBQU0sQ0FBQUUsS0FBSyxFQUFBZixhQUFBLEdBQUFHLENBQUEsTUFBR1MsSUFBSSxDQUFDSSxhQUFhLENBQUNDLFNBQVMsQ0FBQ0MsWUFBWSxFQUFJLENBQUFsQixhQUFBLEdBQUFTLENBQUEsTUFBQVQsYUFBQSxHQUFBRyxDQUFBLGFBQUFlLFlBQVksQ0FBQ0MsR0FBRyxDQUFDQyxRQUFRLENBQUMsQ0FBQyxHQUFLWixjQUFjLENBQUQsQ0FBQyxDQUFDLEVBQUFSLGFBQUEsR0FBQUcsQ0FBQSxNQUUxRyxHQUFJWSxLQUFLLEdBQUssQ0FBQyxDQUFDLENBQUUsQ0FBQWYsYUFBQSxHQUFBYSxDQUFBLFNBQUFiLGFBQUEsR0FBQUcsQ0FBQSxZQUFNLElBQUksQ0FBQVcsS0FBSyxDQUFDLHdCQUF3QixDQUFDLENBQUQsQ0FBQyxJQUN0RCxDQUFBZCxhQUFBLEdBQUFhLENBQUEsU0FBQWIsYUFBQSxHQUFBRyxDQUFBLE9BQUVTLElBQUksQ0FBQ0ksYUFBYSxDQUFDSyxNQUFNLENBQUNOLEtBQUssQ0FBRSxDQUFDLENBQUMsQ0FBQyxDQUFDZixhQUFBLEdBQUFHLENBQUEsT0FFNUNTLElBQUksQ0FBQ1UsSUFBSSxDQUFDLENBQUMsQ0FDZixDQUFDLENBQUMsQ0FDRFgsSUFBSSxDQUFDLElBQU0sQ0FBQVgsYUFBQSxHQUFBUyxDQUFBLE1BQUUsQ0FBQyxDQUFDLENBQ3hCLENBQUNULGFBQUEsR0FBQUcsQ0FBQSxPQUVEb0IsTUFBTSxDQUFDQyxPQUFPLENBQUdsQixrQkFBa0IifQ==