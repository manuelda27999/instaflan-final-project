function cov_2masmv6kc6(){var path="C:\\Users\\loco8\\workspace\\eurofirms-bootcamp-202305\\staff\\manuel-david-castillo\\instaflan-fullstack\\api\\logic\\user-logic\\retrieveUsersNotFollowed.js";var hash="f9440f54539604caa6b0109affe6e8a28432af83";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\loco8\\workspace\\eurofirms-bootcamp-202305\\staff\\manuel-david-castillo\\instaflan-fullstack\\api\\logic\\user-logic\\retrieveUsersNotFollowed.js",statementMap:{"0":{start:{line:1,column:17},end:{line:1,column:45}},"1":{start:{line:2,column:23},end:{line:2,column:55}},"2":{start:{line:5,column:2},end:{line:5,column:20}},"3":{start:{line:7,column:2},end:{line:39,column:6}},"4":{start:{line:9,column:6},end:{line:9,column:50}},"5":{start:{line:9,column:17},end:{line:9,column:50}},"6":{start:{line:11,column:28},end:{line:11,column:42}},"7":{start:{line:12,column:6},end:{line:12,column:34}},"8":{start:{line:14,column:6},end:{line:30,column:8}},"9":{start:{line:34,column:6},end:{line:36,column:8}},"10":{start:{line:35,column:8},end:{line:35,column:23}},"11":{start:{line:38,column:6},end:{line:38,column:18}},"12":{start:{line:42,column:0},end:{line:42,column:41}}},fnMap:{"0":{name:"retrieveUsersNotFollowed",decl:{start:{line:4,column:9},end:{line:4,column:33}},loc:{start:{line:4,column:42},end:{line:40,column:1}},line:4},"1":{name:"(anonymous_1)",decl:{start:{line:8,column:10},end:{line:8,column:11}},loc:{start:{line:8,column:18},end:{line:31,column:5}},line:8},"2":{name:"(anonymous_2)",decl:{start:{line:32,column:10},end:{line:32,column:11}},loc:{start:{line:32,column:19},end:{line:39,column:5}},line:32},"3":{name:"(anonymous_3)",decl:{start:{line:34,column:20},end:{line:34,column:21}},loc:{start:{line:34,column:28},end:{line:36,column:7}},line:34}},branchMap:{"0":{loc:{start:{line:9,column:6},end:{line:9,column:50}},type:"if",locations:[{start:{line:9,column:6},end:{line:9,column:50}},{start:{line:9,column:6},end:{line:9,column:50}}],line:9}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},f:{"0":0,"1":0,"2":0,"3":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f9440f54539604caa6b0109affe6e8a28432af83"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2masmv6kc6=function(){return actualCoverage;};}return actualCoverage;}cov_2masmv6kc6();const{User}=(cov_2masmv6kc6().s[0]++,require("../../data/models"));const{validateId}=(cov_2masmv6kc6().s[1]++,require("../helpers/validators"));function retrieveUsersNotFollowed(userId){cov_2masmv6kc6().f[0]++;cov_2masmv6kc6().s[2]++;validateId(userId);cov_2masmv6kc6().s[3]++;return User.findById(userId).lean().then(user=>{cov_2masmv6kc6().f[1]++;cov_2masmv6kc6().s[4]++;if(!user){cov_2masmv6kc6().b[0][0]++;cov_2masmv6kc6().s[5]++;throw new Error('user not found');}else{cov_2masmv6kc6().b[0][1]++;}const usersFollowed=(cov_2masmv6kc6().s[6]++,user.following);cov_2masmv6kc6().s[7]++;usersFollowed.push(user._id);cov_2masmv6kc6().s[8]++;return User.aggregate([{$match:{_id:{$nin:usersFollowed}}},{$sample:{size:4}},{$project:{id:{$toString:"$_id"},name:1,image:1}}]);}).then(users=>{cov_2masmv6kc6().f[2]++;cov_2masmv6kc6().s[9]++;users.forEach(user=>{cov_2masmv6kc6().f[3]++;cov_2masmv6kc6().s[10]++;delete user._id;});cov_2masmv6kc6().s[11]++;return users;});}cov_2masmv6kc6().s[12]++;module.exports=retrieveUsersNotFollowed;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMm1hc212NmtjNiIsImFjdHVhbENvdmVyYWdlIiwiVXNlciIsInMiLCJyZXF1aXJlIiwidmFsaWRhdGVJZCIsInJldHJpZXZlVXNlcnNOb3RGb2xsb3dlZCIsInVzZXJJZCIsImYiLCJmaW5kQnlJZCIsImxlYW4iLCJ0aGVuIiwidXNlciIsImIiLCJFcnJvciIsInVzZXJzRm9sbG93ZWQiLCJmb2xsb3dpbmciLCJwdXNoIiwiX2lkIiwiYWdncmVnYXRlIiwiJG1hdGNoIiwiJG5pbiIsIiRzYW1wbGUiLCJzaXplIiwiJHByb2plY3QiLCJpZCIsIiR0b1N0cmluZyIsIm5hbWUiLCJpbWFnZSIsInVzZXJzIiwiZm9yRWFjaCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJyZXRyaWV2ZVVzZXJzTm90Rm9sbG93ZWQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyBVc2VyIH0gPSByZXF1aXJlKFwiLi4vLi4vZGF0YS9tb2RlbHNcIik7XHJcbmNvbnN0IHsgdmFsaWRhdGVJZCB9ID0gcmVxdWlyZShcIi4uL2hlbHBlcnMvdmFsaWRhdG9yc1wiKTtcclxuXHJcbmZ1bmN0aW9uIHJldHJpZXZlVXNlcnNOb3RGb2xsb3dlZCh1c2VySWQpIHtcclxuICB2YWxpZGF0ZUlkKHVzZXJJZClcclxuXHJcbiAgcmV0dXJuIFVzZXIuZmluZEJ5SWQodXNlcklkKS5sZWFuKClcclxuICAgIC50aGVuKHVzZXIgPT4ge1xyXG4gICAgICBpZiAoIXVzZXIpIHRocm93IG5ldyBFcnJvcigndXNlciBub3QgZm91bmQnKVxyXG5cclxuICAgICAgY29uc3QgdXNlcnNGb2xsb3dlZCA9IHVzZXIuZm9sbG93aW5nXHJcbiAgICAgIHVzZXJzRm9sbG93ZWQucHVzaCh1c2VyLl9pZClcclxuXHJcbiAgICAgIHJldHVybiBVc2VyLmFnZ3JlZ2F0ZShbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgJG1hdGNoOiB7XHJcbiAgICAgICAgICAgIF9pZDogeyAkbmluOiB1c2Vyc0ZvbGxvd2VkIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICRzYW1wbGU6IHsgc2l6ZTogNCB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAkcHJvamVjdDoge1xyXG4gICAgICAgICAgICBpZDogeyAkdG9TdHJpbmc6IFwiJF9pZFwiIH0sXHJcbiAgICAgICAgICAgIG5hbWU6IDEsXHJcbiAgICAgICAgICAgIGltYWdlOiAxXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICBdKVxyXG4gICAgfSlcclxuICAgIC50aGVuKHVzZXJzID0+IHtcclxuXHJcbiAgICAgIHVzZXJzLmZvckVhY2godXNlciA9PiB7XHJcbiAgICAgICAgZGVsZXRlIHVzZXIuX2lkXHJcbiAgICAgIH0pXHJcblxyXG4gICAgICByZXR1cm4gdXNlcnNcclxuICAgIH0pXHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gcmV0cmlldmVVc2Vyc05vdEZvbGxvd2VkIl0sIm1hcHBpbmdzIjoicTJFQWVZO0FBQUFBLGNBQUEsU0FBQUEsQ0FBQSxTQUFBQyxjQUFBLFdBQUFBLGNBQUEsRUFBQUQsY0FBQSxHQWZaLEtBQU0sQ0FBRUUsSUFBSyxDQUFDLEVBQUFGLGNBQUEsR0FBQUcsQ0FBQSxNQUFHQyxPQUFPLENBQUMsbUJBQW1CLENBQUMsRUFDN0MsS0FBTSxDQUFFQyxVQUFXLENBQUMsRUFBQUwsY0FBQSxHQUFBRyxDQUFBLE1BQUdDLE9BQU8sQ0FBQyx1QkFBdUIsQ0FBQyxFQUV2RCxRQUFTLENBQUFFLHdCQUF3QkEsQ0FBQ0MsTUFBTSxDQUFFLENBQUFQLGNBQUEsR0FBQVEsQ0FBQSxNQUFBUixjQUFBLEdBQUFHLENBQUEsTUFDeENFLFVBQVUsQ0FBQ0UsTUFBTSxDQUFDLENBQUFQLGNBQUEsR0FBQUcsQ0FBQSxNQUVsQixNQUFPLENBQUFELElBQUksQ0FBQ08sUUFBUSxDQUFDRixNQUFNLENBQUMsQ0FBQ0csSUFBSSxDQUFDLENBQUMsQ0FDaENDLElBQUksQ0FBQ0MsSUFBSSxFQUFJLENBQUFaLGNBQUEsR0FBQVEsQ0FBQSxNQUFBUixjQUFBLEdBQUFHLENBQUEsTUFDWixHQUFJLENBQUNTLElBQUksQ0FBRSxDQUFBWixjQUFBLEdBQUFhLENBQUEsU0FBQWIsY0FBQSxHQUFBRyxDQUFBLFdBQU0sSUFBSSxDQUFBVyxLQUFLLENBQUMsZ0JBQWdCLENBQUMsQ0FBRCxDQUFDLEtBQUFkLGNBQUEsR0FBQWEsQ0FBQSxVQUU1QyxLQUFNLENBQUFFLGFBQWEsRUFBQWYsY0FBQSxHQUFBRyxDQUFBLE1BQUdTLElBQUksQ0FBQ0ksU0FBUyxFQUFBaEIsY0FBQSxHQUFBRyxDQUFBLE1BQ3BDWSxhQUFhLENBQUNFLElBQUksQ0FBQ0wsSUFBSSxDQUFDTSxHQUFHLENBQUMsQ0FBQWxCLGNBQUEsR0FBQUcsQ0FBQSxNQUU1QixNQUFPLENBQUFELElBQUksQ0FBQ2lCLFNBQVMsQ0FBQyxDQUNwQixDQUNFQyxNQUFNLENBQUUsQ0FDTkYsR0FBRyxDQUFFLENBQUVHLElBQUksQ0FBRU4sYUFBYyxDQUM3QixDQUNGLENBQUMsQ0FDRCxDQUNFTyxPQUFPLENBQUUsQ0FBRUMsSUFBSSxDQUFFLENBQUUsQ0FDckIsQ0FBQyxDQUNELENBQ0VDLFFBQVEsQ0FBRSxDQUNSQyxFQUFFLENBQUUsQ0FBRUMsU0FBUyxDQUFFLE1BQU8sQ0FBQyxDQUN6QkMsSUFBSSxDQUFFLENBQUMsQ0FDUEMsS0FBSyxDQUFFLENBQ1QsQ0FDRixDQUFDLENBQ0YsQ0FBQyxDQUNKLENBQUMsQ0FBQyxDQUNEakIsSUFBSSxDQUFDa0IsS0FBSyxFQUFJLENBQUE3QixjQUFBLEdBQUFRLENBQUEsTUFBQVIsY0FBQSxHQUFBRyxDQUFBLE1BRWIwQixLQUFLLENBQUNDLE9BQU8sQ0FBQ2xCLElBQUksRUFBSSxDQUFBWixjQUFBLEdBQUFRLENBQUEsTUFBQVIsY0FBQSxHQUFBRyxDQUFBLE9BQ3BCLE1BQU8sQ0FBQVMsSUFBSSxDQUFDTSxHQUFHLENBQ2pCLENBQUMsQ0FBQyxDQUFBbEIsY0FBQSxHQUFBRyxDQUFBLE9BRUYsTUFBTyxDQUFBMEIsS0FBSyxDQUNkLENBQUMsQ0FBQyxDQUNOLENBQUM3QixjQUFBLEdBQUFHLENBQUEsT0FFRDRCLE1BQU0sQ0FBQ0MsT0FBTyxDQUFHMUIsd0JBQXdCIn0=