function cov_2irbuo7gvc(){var path="C:\\Users\\loco8\\workspace\\eurofirms-bootcamp-202305\\staff\\manuel-david-castillo\\instaflan-fullstack\\api\\logic\\user-logic\\searchUser.js";var hash="d5204ce6ba7280fc377c78a7a8c62d07f435dbfe";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\loco8\\workspace\\eurofirms-bootcamp-202305\\staff\\manuel-david-castillo\\instaflan-fullstack\\api\\logic\\user-logic\\searchUser.js",statementMap:{"0":{start:{line:1,column:21},end:{line:1,column:53}},"1":{start:{line:2,column:15},end:{line:2,column:43}},"2":{start:{line:5,column:4},end:{line:5,column:22}},"3":{start:{line:7,column:18},end:{line:7,column:44}},"4":{start:{line:9,column:4},end:{line:19,column:6}},"5":{start:{line:11,column:8},end:{line:11,column:53}},"6":{start:{line:11,column:19},end:{line:11,column:53}},"7":{start:{line:13,column:8},end:{line:16,column:10}},"8":{start:{line:14,column:12},end:{line:14,column:41}},"9":{start:{line:15,column:12},end:{line:15,column:27}},"10":{start:{line:18,column:8},end:{line:18,column:20}},"11":{start:{line:22,column:0},end:{line:22,column:27}}},fnMap:{"0":{name:"searchUser",decl:{start:{line:4,column:9},end:{line:4,column:19}},loc:{start:{line:4,column:34},end:{line:20,column:1}},line:4},"1":{name:"(anonymous_1)",decl:{start:{line:10,column:10},end:{line:10,column:11}},loc:{start:{line:10,column:19},end:{line:19,column:5}},line:10},"2":{name:"(anonymous_2)",decl:{start:{line:13,column:22},end:{line:13,column:23}},loc:{start:{line:13,column:30},end:{line:16,column:9}},line:13}},branchMap:{"0":{loc:{start:{line:11,column:8},end:{line:11,column:53}},type:"if",locations:[{start:{line:11,column:8},end:{line:11,column:53}},{start:{line:11,column:8},end:{line:11,column:53}}],line:11}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d5204ce6ba7280fc377c78a7a8c62d07f435dbfe"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2irbuo7gvc=function(){return actualCoverage;};}return actualCoverage;}cov_2irbuo7gvc();const{validateId}=(cov_2irbuo7gvc().s[0]++,require('../helpers/validators'));const{User}=(cov_2irbuo7gvc().s[1]++,require('../../data/models'));function searchUser(userId,text){cov_2irbuo7gvc().f[0]++;cov_2irbuo7gvc().s[2]++;validateId(userId);const regex=(cov_2irbuo7gvc().s[3]++,new RegExp(`^${text}`,'i'));cov_2irbuo7gvc().s[4]++;return User.find({name:{$regex:regex}},{name:1,image:1}).lean().then(users=>{cov_2irbuo7gvc().f[1]++;cov_2irbuo7gvc().s[5]++;if(!users){cov_2irbuo7gvc().b[0][0]++;cov_2irbuo7gvc().s[6]++;throw new Error('users not found');}else{cov_2irbuo7gvc().b[0][1]++;}cov_2irbuo7gvc().s[7]++;users.forEach(user=>{cov_2irbuo7gvc().f[2]++;cov_2irbuo7gvc().s[8]++;user.id=user._id.toString();cov_2irbuo7gvc().s[9]++;delete user._id;});cov_2irbuo7gvc().s[10]++;return users;});}cov_2irbuo7gvc().s[11]++;module.exports=searchUser;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMmlyYnVvN2d2YyIsImFjdHVhbENvdmVyYWdlIiwidmFsaWRhdGVJZCIsInMiLCJyZXF1aXJlIiwiVXNlciIsInNlYXJjaFVzZXIiLCJ1c2VySWQiLCJ0ZXh0IiwiZiIsInJlZ2V4IiwiUmVnRXhwIiwiZmluZCIsIm5hbWUiLCIkcmVnZXgiLCJpbWFnZSIsImxlYW4iLCJ0aGVuIiwidXNlcnMiLCJiIiwiRXJyb3IiLCJmb3JFYWNoIiwidXNlciIsImlkIiwiX2lkIiwidG9TdHJpbmciLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsic2VhcmNoVXNlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7dmFsaWRhdGVJZH0gPSByZXF1aXJlKCcuLi9oZWxwZXJzL3ZhbGlkYXRvcnMnKVxyXG5jb25zdCB7VXNlcn0gPSByZXF1aXJlKCcuLi8uLi9kYXRhL21vZGVscycpXHJcblxyXG5mdW5jdGlvbiBzZWFyY2hVc2VyKHVzZXJJZCwgdGV4dCkge1xyXG4gICAgdmFsaWRhdGVJZCh1c2VySWQpXHJcblxyXG4gICAgY29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKGBeJHt0ZXh0fWAsJ2knKVxyXG5cclxuICAgIHJldHVybiBVc2VyLmZpbmQoe25hbWU6IHskcmVnZXg6IHJlZ2V4fX0se25hbWU6IDEsIGltYWdlOjF9KS5sZWFuKClcclxuICAgIC50aGVuKHVzZXJzID0+IHtcclxuICAgICAgICBpZighdXNlcnMpIHRocm93IG5ldyBFcnJvcigndXNlcnMgbm90IGZvdW5kJylcclxuXHJcbiAgICAgICAgdXNlcnMuZm9yRWFjaCh1c2VyID0+IHtcclxuICAgICAgICAgICAgdXNlci5pZCA9IHVzZXIuX2lkLnRvU3RyaW5nKClcclxuICAgICAgICAgICAgZGVsZXRlIHVzZXIuX2lkXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgcmV0dXJuIHVzZXJzXHJcbiAgICB9KVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHNlYXJjaFVzZXIiXSwibWFwcGluZ3MiOiJvbkVBZVk7QUFBQUEsY0FBQSxTQUFBQSxDQUFBLFNBQUFDLGNBQUEsV0FBQUEsY0FBQSxFQUFBRCxjQUFBLEdBZlosS0FBTSxDQUFDRSxVQUFVLENBQUMsRUFBQUYsY0FBQSxHQUFBRyxDQUFBLE1BQUdDLE9BQU8sQ0FBQyx1QkFBdUIsQ0FBQyxFQUNyRCxLQUFNLENBQUNDLElBQUksQ0FBQyxFQUFBTCxjQUFBLEdBQUFHLENBQUEsTUFBR0MsT0FBTyxDQUFDLG1CQUFtQixDQUFDLEVBRTNDLFFBQVMsQ0FBQUUsVUFBVUEsQ0FBQ0MsTUFBTSxDQUFFQyxJQUFJLENBQUUsQ0FBQVIsY0FBQSxHQUFBUyxDQUFBLE1BQUFULGNBQUEsR0FBQUcsQ0FBQSxNQUM5QkQsVUFBVSxDQUFDSyxNQUFNLENBQUMsQ0FFbEIsS0FBTSxDQUFBRyxLQUFLLEVBQUFWLGNBQUEsR0FBQUcsQ0FBQSxNQUFHLEdBQUksQ0FBQVEsTUFBTSxDQUFFLElBQUdILElBQUssRUFBQyxDQUFDLEdBQUcsQ0FBQyxFQUFBUixjQUFBLEdBQUFHLENBQUEsTUFFeEMsTUFBTyxDQUFBRSxJQUFJLENBQUNPLElBQUksQ0FBQyxDQUFDQyxJQUFJLENBQUUsQ0FBQ0MsTUFBTSxDQUFFSixLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUNHLElBQUksQ0FBRSxDQUFDLENBQUVFLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDQyxJQUFJLENBQUMsQ0FBQyxDQUNsRUMsSUFBSSxDQUFDQyxLQUFLLEVBQUksQ0FBQWxCLGNBQUEsR0FBQVMsQ0FBQSxNQUFBVCxjQUFBLEdBQUFHLENBQUEsTUFDWCxHQUFHLENBQUNlLEtBQUssQ0FBRSxDQUFBbEIsY0FBQSxHQUFBbUIsQ0FBQSxTQUFBbkIsY0FBQSxHQUFBRyxDQUFBLFdBQU0sSUFBSSxDQUFBaUIsS0FBSyxDQUFDLGlCQUFpQixDQUFDLENBQUQsQ0FBQyxLQUFBcEIsY0FBQSxHQUFBbUIsQ0FBQSxVQUFBbkIsY0FBQSxHQUFBRyxDQUFBLE1BRTdDZSxLQUFLLENBQUNHLE9BQU8sQ0FBQ0MsSUFBSSxFQUFJLENBQUF0QixjQUFBLEdBQUFTLENBQUEsTUFBQVQsY0FBQSxHQUFBRyxDQUFBLE1BQ2xCbUIsSUFBSSxDQUFDQyxFQUFFLENBQUdELElBQUksQ0FBQ0UsR0FBRyxDQUFDQyxRQUFRLENBQUMsQ0FBQyxDQUFBekIsY0FBQSxHQUFBRyxDQUFBLE1BQzdCLE1BQU8sQ0FBQW1CLElBQUksQ0FBQ0UsR0FBRyxDQUNuQixDQUFDLENBQUMsQ0FBQXhCLGNBQUEsR0FBQUcsQ0FBQSxPQUVGLE1BQU8sQ0FBQWUsS0FBSyxDQUNoQixDQUFDLENBQUMsQ0FDTixDQUFDbEIsY0FBQSxHQUFBRyxDQUFBLE9BRUR1QixNQUFNLENBQUNDLE9BQU8sQ0FBR3JCLFVBQVUifQ==