function cov_eg41rv11k(){var path="C:\\Users\\loco8\\workspace\\eurofirms-bootcamp-202305\\staff\\manuel-david-castillo\\instaflan-fullstack\\api\\logic\\notifications-logic\\deleteNotification.js";var hash="bd1c2dc87a11f9ac1e2d16183c6a965cc2ab4d47";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\loco8\\workspace\\eurofirms-bootcamp-202305\\staff\\manuel-david-castillo\\instaflan-fullstack\\api\\logic\\notifications-logic\\deleteNotification.js",statementMap:{"0":{start:{line:1,column:23},end:{line:1,column:55}},"1":{start:{line:2,column:17},end:{line:2,column:45}},"2":{start:{line:5,column:4},end:{line:5,column:22}},"3":{start:{line:6,column:4},end:{line:6,column:30}},"4":{start:{line:8,column:4},end:{line:19,column:24}},"5":{start:{line:10,column:12},end:{line:10,column:56}},"6":{start:{line:10,column:23},end:{line:10,column:56}},"7":{start:{line:12,column:26},end:{line:12,column:118}},"8":{start:{line:12,column:71},end:{line:12,column:117}},"9":{start:{line:14,column:12},end:{line:15,column:52}},"10":{start:{line:14,column:30},end:{line:14,column:71}},"11":{start:{line:15,column:17},end:{line:15,column:52}},"12":{start:{line:17,column:12},end:{line:17,column:23}},"13":{start:{line:22,column:0},end:{line:22,column:35}}},fnMap:{"0":{name:"deleteNotification",decl:{start:{line:4,column:9},end:{line:4,column:27}},loc:{start:{line:4,column:52},end:{line:20,column:1}},line:4},"1":{name:"(anonymous_1)",decl:{start:{line:9,column:14},end:{line:9,column:15}},loc:{start:{line:9,column:22},end:{line:18,column:9}},line:9},"2":{name:"(anonymous_2)",decl:{start:{line:12,column:55},end:{line:12,column:56}},loc:{start:{line:12,column:71},end:{line:12,column:117}},line:12},"3":{name:"(anonymous_3)",decl:{start:{line:19,column:14},end:{line:19,column:15}},loc:{start:{line:19,column:20},end:{line:19,column:23}},line:19}},branchMap:{"0":{loc:{start:{line:10,column:12},end:{line:10,column:56}},type:"if",locations:[{start:{line:10,column:12},end:{line:10,column:56}},{start:{line:10,column:12},end:{line:10,column:56}}],line:10},"1":{loc:{start:{line:14,column:12},end:{line:15,column:52}},type:"if",locations:[{start:{line:14,column:12},end:{line:15,column:52}},{start:{line:14,column:12},end:{line:15,column:52}}],line:14}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},f:{"0":0,"1":0,"2":0,"3":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"bd1c2dc87a11f9ac1e2d16183c6a965cc2ab4d47"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_eg41rv11k=function(){return actualCoverage;};}return actualCoverage;}cov_eg41rv11k();const{validateId}=(cov_eg41rv11k().s[0]++,require("../helpers/validators"));const{User}=(cov_eg41rv11k().s[1]++,require("../../data/models"));function deleteNotification(userId,notificationId){cov_eg41rv11k().f[0]++;cov_eg41rv11k().s[2]++;validateId(userId);cov_eg41rv11k().s[3]++;validateId(notificationId);cov_eg41rv11k().s[4]++;return User.findById(userId,'-__v').then(user=>{cov_eg41rv11k().f[1]++;cov_eg41rv11k().s[5]++;if(!user){cov_eg41rv11k().b[0][0]++;cov_eg41rv11k().s[6]++;throw new Error('user not found');}else{cov_eg41rv11k().b[0][1]++;}const index=(cov_eg41rv11k().s[7]++,user.notifications.findIndex(notification=>{cov_eg41rv11k().f[2]++;cov_eg41rv11k().s[8]++;return notification._id.toString()===notificationId;}));cov_eg41rv11k().s[9]++;if(index===-1){cov_eg41rv11k().b[1][0]++;cov_eg41rv11k().s[10]++;throw new Error('notification not found');}else{cov_eg41rv11k().b[1][1]++;cov_eg41rv11k().s[11]++;user.notifications.splice(index,1);}cov_eg41rv11k().s[12]++;user.save();}).then(()=>{cov_eg41rv11k().f[3]++;});}cov_eg41rv11k().s[13]++;module.exports=deleteNotification;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfZWc0MXJ2MTFrIiwiYWN0dWFsQ292ZXJhZ2UiLCJ2YWxpZGF0ZUlkIiwicyIsInJlcXVpcmUiLCJVc2VyIiwiZGVsZXRlTm90aWZpY2F0aW9uIiwidXNlcklkIiwibm90aWZpY2F0aW9uSWQiLCJmIiwiZmluZEJ5SWQiLCJ0aGVuIiwidXNlciIsImIiLCJFcnJvciIsImluZGV4Iiwibm90aWZpY2F0aW9ucyIsImZpbmRJbmRleCIsIm5vdGlmaWNhdGlvbiIsIl9pZCIsInRvU3RyaW5nIiwic3BsaWNlIiwic2F2ZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJkZWxldGVOb3RpZmljYXRpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyB2YWxpZGF0ZUlkIH0gPSByZXF1aXJlKFwiLi4vaGVscGVycy92YWxpZGF0b3JzXCIpXHJcbmNvbnN0IHsgVXNlciB9ID0gcmVxdWlyZShcIi4uLy4uL2RhdGEvbW9kZWxzXCIpXHJcblxyXG5mdW5jdGlvbiBkZWxldGVOb3RpZmljYXRpb24odXNlcklkLCBub3RpZmljYXRpb25JZCkge1xyXG4gICAgdmFsaWRhdGVJZCh1c2VySWQpXHJcbiAgICB2YWxpZGF0ZUlkKG5vdGlmaWNhdGlvbklkKVxyXG5cclxuICAgIHJldHVybiBVc2VyLmZpbmRCeUlkKHVzZXJJZCwgJy1fX3YnKVxyXG4gICAgICAgIC50aGVuKHVzZXIgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIXVzZXIpIHRocm93IG5ldyBFcnJvcigndXNlciBub3QgZm91bmQnKVxyXG5cclxuICAgICAgICAgICAgY29uc3QgaW5kZXggPSB1c2VyLm5vdGlmaWNhdGlvbnMuZmluZEluZGV4KG5vdGlmaWNhdGlvbiA9PiBub3RpZmljYXRpb24uX2lkLnRvU3RyaW5nKCkgPT09IG5vdGlmaWNhdGlvbklkKVxyXG5cclxuICAgICAgICAgICAgaWYgKGluZGV4ID09PSAtMSkgdGhyb3cgbmV3IEVycm9yKCdub3RpZmljYXRpb24gbm90IGZvdW5kJylcclxuICAgICAgICAgICAgZWxzZSB1c2VyLm5vdGlmaWNhdGlvbnMuc3BsaWNlKGluZGV4LCAxKVxyXG5cclxuICAgICAgICAgICAgdXNlci5zYXZlKClcclxuICAgICAgICB9KVxyXG4gICAgICAgIC50aGVuKCgpID0+IHsgfSlcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBkZWxldGVOb3RpZmljYXRpb24iXSwibWFwcGluZ3MiOiIyb0ZBZVk7QUFBQUEsYUFBQSxTQUFBQSxDQUFBLFNBQUFDLGNBQUEsV0FBQUEsY0FBQSxFQUFBRCxhQUFBLEdBZlosS0FBTSxDQUFFRSxVQUFXLENBQUMsRUFBQUYsYUFBQSxHQUFBRyxDQUFBLE1BQUdDLE9BQU8sQ0FBQyx1QkFBdUIsQ0FBQyxFQUN2RCxLQUFNLENBQUVDLElBQUssQ0FBQyxFQUFBTCxhQUFBLEdBQUFHLENBQUEsTUFBR0MsT0FBTyxDQUFDLG1CQUFtQixDQUFDLEVBRTdDLFFBQVMsQ0FBQUUsa0JBQWtCQSxDQUFDQyxNQUFNLENBQUVDLGNBQWMsQ0FBRSxDQUFBUixhQUFBLEdBQUFTLENBQUEsTUFBQVQsYUFBQSxHQUFBRyxDQUFBLE1BQ2hERCxVQUFVLENBQUNLLE1BQU0sQ0FBQyxDQUFBUCxhQUFBLEdBQUFHLENBQUEsTUFDbEJELFVBQVUsQ0FBQ00sY0FBYyxDQUFDLENBQUFSLGFBQUEsR0FBQUcsQ0FBQSxNQUUxQixNQUFPLENBQUFFLElBQUksQ0FBQ0ssUUFBUSxDQUFDSCxNQUFNLENBQUUsTUFBTSxDQUFDLENBQy9CSSxJQUFJLENBQUNDLElBQUksRUFBSSxDQUFBWixhQUFBLEdBQUFTLENBQUEsTUFBQVQsYUFBQSxHQUFBRyxDQUFBLE1BQ1YsR0FBSSxDQUFDUyxJQUFJLENBQUUsQ0FBQVosYUFBQSxHQUFBYSxDQUFBLFNBQUFiLGFBQUEsR0FBQUcsQ0FBQSxXQUFNLElBQUksQ0FBQVcsS0FBSyxDQUFDLGdCQUFnQixDQUFDLENBQUQsQ0FBQyxLQUFBZCxhQUFBLEdBQUFhLENBQUEsVUFFNUMsS0FBTSxDQUFBRSxLQUFLLEVBQUFmLGFBQUEsR0FBQUcsQ0FBQSxNQUFHUyxJQUFJLENBQUNJLGFBQWEsQ0FBQ0MsU0FBUyxDQUFDQyxZQUFZLEVBQUksQ0FBQWxCLGFBQUEsR0FBQVMsQ0FBQSxNQUFBVCxhQUFBLEdBQUFHLENBQUEsYUFBQWUsWUFBWSxDQUFDQyxHQUFHLENBQUNDLFFBQVEsQ0FBQyxDQUFDLEdBQUtaLGNBQWMsQ0FBRCxDQUFDLENBQUMsRUFBQVIsYUFBQSxHQUFBRyxDQUFBLE1BRTFHLEdBQUlZLEtBQUssR0FBSyxDQUFDLENBQUMsQ0FBRSxDQUFBZixhQUFBLEdBQUFhLENBQUEsU0FBQWIsYUFBQSxHQUFBRyxDQUFBLFlBQU0sSUFBSSxDQUFBVyxLQUFLLENBQUMsd0JBQXdCLENBQUMsQ0FBRCxDQUFDLElBQ3RELENBQUFkLGFBQUEsR0FBQWEsQ0FBQSxTQUFBYixhQUFBLEdBQUFHLENBQUEsT0FBQVMsSUFBSSxDQUFDSSxhQUFhLENBQUNLLE1BQU0sQ0FBQ04sS0FBSyxDQUFFLENBQUMsQ0FBQyxDQUFELENBQUNmLGFBQUEsR0FBQUcsQ0FBQSxPQUV4Q1MsSUFBSSxDQUFDVSxJQUFJLENBQUMsQ0FBQyxDQUNmLENBQUMsQ0FBQyxDQUNEWCxJQUFJLENBQUMsSUFBTSxDQUFBWCxhQUFBLEdBQUFTLENBQUEsTUFBRSxDQUFDLENBQUMsQ0FDeEIsQ0FBQ1QsYUFBQSxHQUFBRyxDQUFBLE9BRURvQixNQUFNLENBQUNDLE9BQU8sQ0FBR2xCLGtCQUFrQiJ9