function cov_rl3r2mjbx(){var path="C:\\Users\\loco8\\workspace\\eurofirms-bootcamp-202305\\staff\\manuel-david-castillo\\instaflan-fullstack\\api\\logic\\chats-logic\\numberChatsNotReading.js";var hash="db10b5394efd7870483f2a851462f18420688d70";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\loco8\\workspace\\eurofirms-bootcamp-202305\\staff\\manuel-david-castillo\\instaflan-fullstack\\api\\logic\\chats-logic\\numberChatsNotReading.js",statementMap:{"0":{start:{line:1,column:23},end:{line:1,column:55}},"1":{start:{line:2,column:15},end:{line:2,column:43}},"2":{start:{line:5,column:4},end:{line:5,column:22}},"3":{start:{line:7,column:4},end:{line:22,column:6}},"4":{start:{line:9,column:8},end:{line:9,column:53}},"5":{start:{line:9,column:19},end:{line:9,column:53}},"6":{start:{line:11,column:20},end:{line:11,column:21}},"7":{start:{line:13,column:8},end:{line:19,column:11}},"8":{start:{line:14,column:12},end:{line:18,column:13}},"9":{start:{line:15,column:17},end:{line:17,column:14}},"10":{start:{line:16,column:16},end:{line:16,column:52}},"11":{start:{line:16,column:45},end:{line:16,column:52}},"12":{start:{line:21,column:8},end:{line:21,column:20}},"13":{start:{line:25,column:0},end:{line:25,column:38}}},fnMap:{"0":{name:"numberChatsNotReading",decl:{start:{line:4,column:9},end:{line:4,column:30}},loc:{start:{line:4,column:39},end:{line:23,column:1}},line:4},"1":{name:"(anonymous_1)",decl:{start:{line:8,column:10},end:{line:8,column:11}},loc:{start:{line:8,column:21},end:{line:22,column:5}},line:8},"2":{name:"(anonymous_2)",decl:{start:{line:13,column:22},end:{line:13,column:23}},loc:{start:{line:13,column:30},end:{line:19,column:9}},line:13},"3":{name:"(anonymous_3)",decl:{start:{line:15,column:40},end:{line:15,column:41}},loc:{start:{line:15,column:46},end:{line:17,column:13}},line:15}},branchMap:{"0":{loc:{start:{line:9,column:8},end:{line:9,column:53}},type:"if",locations:[{start:{line:9,column:8},end:{line:9,column:53}},{start:{line:9,column:8},end:{line:9,column:53}}],line:9},"1":{loc:{start:{line:14,column:12},end:{line:18,column:13}},type:"if",locations:[{start:{line:14,column:12},end:{line:18,column:13}},{start:{line:14,column:12},end:{line:18,column:13}}],line:14},"2":{loc:{start:{line:16,column:16},end:{line:16,column:52}},type:"if",locations:[{start:{line:16,column:16},end:{line:16,column:52}},{start:{line:16,column:16},end:{line:16,column:52}}],line:16}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},f:{"0":0,"1":0,"2":0,"3":0},b:{"0":[0,0],"1":[0,0],"2":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"db10b5394efd7870483f2a851462f18420688d70"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_rl3r2mjbx=function(){return actualCoverage;};}return actualCoverage;}cov_rl3r2mjbx();const{validateId}=(cov_rl3r2mjbx().s[0]++,require("../helpers/validators"));const{Chat}=(cov_rl3r2mjbx().s[1]++,require("../../data/models"));function numberChatsNotReading(userId){cov_rl3r2mjbx().f[0]++;cov_rl3r2mjbx().s[2]++;validateId(userId);cov_rl3r2mjbx().s[3]++;return Chat.find({users:userId},'unreadFor').lean().then(chats=>{cov_rl3r2mjbx().f[1]++;cov_rl3r2mjbx().s[4]++;if(!chats){cov_rl3r2mjbx().b[0][0]++;cov_rl3r2mjbx().s[5]++;throw new Error('chats not found');}else{cov_rl3r2mjbx().b[0][1]++;}let count=(cov_rl3r2mjbx().s[6]++,0);cov_rl3r2mjbx().s[7]++;chats.forEach(chat=>{cov_rl3r2mjbx().f[2]++;cov_rl3r2mjbx().s[8]++;if(chat.unreadFor){cov_rl3r2mjbx().b[1][0]++;cov_rl3r2mjbx().s[9]++;chat.unreadFor.forEach(id=>{cov_rl3r2mjbx().f[3]++;cov_rl3r2mjbx().s[10]++;if(id.toString()===userId){cov_rl3r2mjbx().b[2][0]++;cov_rl3r2mjbx().s[11]++;count++;}else{cov_rl3r2mjbx().b[2][1]++;}});}else{cov_rl3r2mjbx().b[1][1]++;}});cov_rl3r2mjbx().s[12]++;return count;});}cov_rl3r2mjbx().s[13]++;module.exports=numberChatsNotReading;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfcmwzcjJtamJ4IiwiYWN0dWFsQ292ZXJhZ2UiLCJ2YWxpZGF0ZUlkIiwicyIsInJlcXVpcmUiLCJDaGF0IiwibnVtYmVyQ2hhdHNOb3RSZWFkaW5nIiwidXNlcklkIiwiZiIsImZpbmQiLCJ1c2VycyIsImxlYW4iLCJ0aGVuIiwiY2hhdHMiLCJiIiwiRXJyb3IiLCJjb3VudCIsImZvckVhY2giLCJjaGF0IiwidW5yZWFkRm9yIiwiaWQiLCJ0b1N0cmluZyIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJudW1iZXJDaGF0c05vdFJlYWRpbmcuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyB2YWxpZGF0ZUlkIH0gPSByZXF1aXJlKFwiLi4vaGVscGVycy92YWxpZGF0b3JzXCIpO1xyXG5jb25zdCB7Q2hhdH0gPSByZXF1aXJlKFwiLi4vLi4vZGF0YS9tb2RlbHNcIilcclxuXHJcbmZ1bmN0aW9uIG51bWJlckNoYXRzTm90UmVhZGluZyh1c2VySWQpIHtcclxuICAgIHZhbGlkYXRlSWQodXNlcklkKSBcclxuXHJcbiAgICByZXR1cm4gQ2hhdC5maW5kKHt1c2VyczogdXNlcklkfSwgJ3VucmVhZEZvcicpLmxlYW4oKVxyXG4gICAgLnRoZW4oKGNoYXRzKSA9PiB7XHJcbiAgICAgICAgaWYoIWNoYXRzKSB0aHJvdyBuZXcgRXJyb3IoJ2NoYXRzIG5vdCBmb3VuZCcpXHJcblxyXG4gICAgICAgIGxldCBjb3VudCA9IDBcclxuXHJcbiAgICAgICAgY2hhdHMuZm9yRWFjaChjaGF0ID0+IHtcclxuICAgICAgICAgICAgaWYoY2hhdC51bnJlYWRGb3IpIHtcclxuICAgICAgICAgICAgICAgICBjaGF0LnVucmVhZEZvci5mb3JFYWNoKGlkID0+IHtcclxuICAgICAgICAgICAgICAgIGlmKGlkLnRvU3RyaW5nKCkgPT09IHVzZXJJZCkgY291bnQrK1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBjb3VudFxyXG4gICAgfSlcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBudW1iZXJDaGF0c05vdFJlYWRpbmciXSwibWFwcGluZ3MiOiIrekZBZVk7QUFBQUEsYUFBQSxTQUFBQSxDQUFBLFNBQUFDLGNBQUEsV0FBQUEsY0FBQSxFQUFBRCxhQUFBLEdBZlosS0FBTSxDQUFFRSxVQUFXLENBQUMsRUFBQUYsYUFBQSxHQUFBRyxDQUFBLE1BQUdDLE9BQU8sQ0FBQyx1QkFBdUIsQ0FBQyxFQUN2RCxLQUFNLENBQUNDLElBQUksQ0FBQyxFQUFBTCxhQUFBLEdBQUFHLENBQUEsTUFBR0MsT0FBTyxDQUFDLG1CQUFtQixDQUFDLEVBRTNDLFFBQVMsQ0FBQUUscUJBQXFCQSxDQUFDQyxNQUFNLENBQUUsQ0FBQVAsYUFBQSxHQUFBUSxDQUFBLE1BQUFSLGFBQUEsR0FBQUcsQ0FBQSxNQUNuQ0QsVUFBVSxDQUFDSyxNQUFNLENBQUMsQ0FBQVAsYUFBQSxHQUFBRyxDQUFBLE1BRWxCLE1BQU8sQ0FBQUUsSUFBSSxDQUFDSSxJQUFJLENBQUMsQ0FBQ0MsS0FBSyxDQUFFSCxNQUFNLENBQUMsQ0FBRSxXQUFXLENBQUMsQ0FBQ0ksSUFBSSxDQUFDLENBQUMsQ0FDcERDLElBQUksQ0FBRUMsS0FBSyxFQUFLLENBQUFiLGFBQUEsR0FBQVEsQ0FBQSxNQUFBUixhQUFBLEdBQUFHLENBQUEsTUFDYixHQUFHLENBQUNVLEtBQUssQ0FBRSxDQUFBYixhQUFBLEdBQUFjLENBQUEsU0FBQWQsYUFBQSxHQUFBRyxDQUFBLFdBQU0sSUFBSSxDQUFBWSxLQUFLLENBQUMsaUJBQWlCLENBQUMsQ0FBRCxDQUFDLEtBQUFmLGFBQUEsR0FBQWMsQ0FBQSxVQUU3QyxHQUFJLENBQUFFLEtBQUssRUFBQWhCLGFBQUEsR0FBQUcsQ0FBQSxNQUFHLENBQUMsRUFBQUgsYUFBQSxHQUFBRyxDQUFBLE1BRWJVLEtBQUssQ0FBQ0ksT0FBTyxDQUFDQyxJQUFJLEVBQUksQ0FBQWxCLGFBQUEsR0FBQVEsQ0FBQSxNQUFBUixhQUFBLEdBQUFHLENBQUEsTUFDbEIsR0FBR2UsSUFBSSxDQUFDQyxTQUFTLENBQUUsQ0FBQW5CLGFBQUEsR0FBQWMsQ0FBQSxTQUFBZCxhQUFBLEdBQUFHLENBQUEsTUFDZGUsSUFBSSxDQUFDQyxTQUFTLENBQUNGLE9BQU8sQ0FBQ0csRUFBRSxFQUFJLENBQUFwQixhQUFBLEdBQUFRLENBQUEsTUFBQVIsYUFBQSxHQUFBRyxDQUFBLE9BQzlCLEdBQUdpQixFQUFFLENBQUNDLFFBQVEsQ0FBQyxDQUFDLEdBQUtkLE1BQU0sQ0FBRSxDQUFBUCxhQUFBLEdBQUFjLENBQUEsU0FBQWQsYUFBQSxHQUFBRyxDQUFBLE9BQUFhLEtBQUssRUFBRSxDQUFELENBQUMsS0FBQWhCLGFBQUEsR0FBQWMsQ0FBQSxVQUN4QyxDQUFDLENBQUMsQ0FDRixDQUFDLEtBQUFkLGFBQUEsR0FBQWMsQ0FBQSxVQUNMLENBQUMsQ0FBQyxDQUFDZCxhQUFBLEdBQUFHLENBQUEsT0FFSCxNQUFPLENBQUFhLEtBQUssQ0FDaEIsQ0FBQyxDQUFDLENBQ04sQ0FBQ2hCLGFBQUEsR0FBQUcsQ0FBQSxPQUVEbUIsTUFBTSxDQUFDQyxPQUFPLENBQUdqQixxQkFBcUIifQ==