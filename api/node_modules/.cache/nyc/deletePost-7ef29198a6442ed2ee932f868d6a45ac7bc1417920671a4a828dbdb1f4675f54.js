function cov_8g9fismqj(){var path="C:\\Users\\loco8\\workspace\\eurofirms-bootcamp-202305\\staff\\manuel-david-castillo\\instaflan-fullstack\\api\\logic\\post-logic\\deletePost.js";var hash="b128815cb58c48e8b02bc8f48def19117a65a3fd";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\loco8\\workspace\\eurofirms-bootcamp-202305\\staff\\manuel-david-castillo\\instaflan-fullstack\\api\\logic\\post-logic\\deletePost.js",statementMap:{"0":{start:{line:1,column:23},end:{line:1,column:51}},"1":{start:{line:2,column:23},end:{line:2,column:55}},"2":{start:{line:5,column:4},end:{line:5,column:22}},"3":{start:{line:6,column:4},end:{line:6,column:22}},"4":{start:{line:8,column:4},end:{line:16,column:10}},"5":{start:{line:10,column:12},end:{line:10,column:56}},"6":{start:{line:10,column:23},end:{line:10,column:56}},"7":{start:{line:11,column:12},end:{line:11,column:56}},"8":{start:{line:11,column:23},end:{line:11,column:56}},"9":{start:{line:13,column:12},end:{line:13,column:106}},"10":{start:{line:13,column:51},end:{line:13,column:106}},"11":{start:{line:15,column:12},end:{line:15,column:52}},"12":{start:{line:19,column:0},end:{line:19,column:27}}},fnMap:{"0":{name:"deletePost",decl:{start:{line:4,column:9},end:{line:4,column:19}},loc:{start:{line:4,column:36},end:{line:17,column:1}},line:4},"1":{name:"(anonymous_1)",decl:{start:{line:9,column:14},end:{line:9,column:15}},loc:{start:{line:9,column:32},end:{line:16,column:9}},line:9}},branchMap:{"0":{loc:{start:{line:10,column:12},end:{line:10,column:56}},type:"if",locations:[{start:{line:10,column:12},end:{line:10,column:56}},{start:{line:10,column:12},end:{line:10,column:56}}],line:10},"1":{loc:{start:{line:11,column:12},end:{line:11,column:56}},type:"if",locations:[{start:{line:11,column:12},end:{line:11,column:56}},{start:{line:11,column:12},end:{line:11,column:56}}],line:11},"2":{loc:{start:{line:13,column:12},end:{line:13,column:106}},type:"if",locations:[{start:{line:13,column:12},end:{line:13,column:106}},{start:{line:13,column:12},end:{line:13,column:106}}],line:13}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},f:{"0":0,"1":0},b:{"0":[0,0],"1":[0,0],"2":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b128815cb58c48e8b02bc8f48def19117a65a3fd"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_8g9fismqj=function(){return actualCoverage;};}return actualCoverage;}cov_8g9fismqj();const{User,Post}=(cov_8g9fismqj().s[0]++,require('../../data/models'));const{validateId}=(cov_8g9fismqj().s[1]++,require('../helpers/validators'));function deletePost(userId,postId){cov_8g9fismqj().f[0]++;cov_8g9fismqj().s[2]++;validateId(userId);cov_8g9fismqj().s[3]++;validateId(postId);cov_8g9fismqj().s[4]++;return Promise.all([User.findById(userId).lean(),Post.findById(postId).lean()]).then(([user,post])=>{cov_8g9fismqj().f[1]++;cov_8g9fismqj().s[5]++;if(!user){cov_8g9fismqj().b[0][0]++;cov_8g9fismqj().s[6]++;throw new Error('user not found');}else{cov_8g9fismqj().b[0][1]++;}cov_8g9fismqj().s[7]++;if(!post){cov_8g9fismqj().b[1][0]++;cov_8g9fismqj().s[8]++;throw new Error('post not found');}else{cov_8g9fismqj().b[1][1]++;}cov_8g9fismqj().s[9]++;if(post.author.toString()!==userId){cov_8g9fismqj().b[2][0]++;cov_8g9fismqj().s[10]++;throw new Error('user and author of post is different');}else{cov_8g9fismqj().b[2][1]++;}cov_8g9fismqj().s[11]++;return Post.deleteOne({_id:post._id});});}cov_8g9fismqj().s[12]++;module.exports=deletePost;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfOGc5ZmlzbXFqIiwiYWN0dWFsQ292ZXJhZ2UiLCJVc2VyIiwiUG9zdCIsInMiLCJyZXF1aXJlIiwidmFsaWRhdGVJZCIsImRlbGV0ZVBvc3QiLCJ1c2VySWQiLCJwb3N0SWQiLCJmIiwiUHJvbWlzZSIsImFsbCIsImZpbmRCeUlkIiwibGVhbiIsInRoZW4iLCJ1c2VyIiwicG9zdCIsImIiLCJFcnJvciIsImF1dGhvciIsInRvU3RyaW5nIiwiZGVsZXRlT25lIiwiX2lkIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbImRlbGV0ZVBvc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyBVc2VyLCBQb3N0IH0gPSByZXF1aXJlKCcuLi8uLi9kYXRhL21vZGVscycpXHJcbmNvbnN0IHsgdmFsaWRhdGVJZCB9ID0gcmVxdWlyZSgnLi4vaGVscGVycy92YWxpZGF0b3JzJylcclxuXHJcbmZ1bmN0aW9uIGRlbGV0ZVBvc3QodXNlcklkLCBwb3N0SWQpIHtcclxuICAgIHZhbGlkYXRlSWQodXNlcklkKVxyXG4gICAgdmFsaWRhdGVJZChwb3N0SWQpXHJcblxyXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFtVc2VyLmZpbmRCeUlkKHVzZXJJZCkubGVhbigpLCBQb3N0LmZpbmRCeUlkKHBvc3RJZCkubGVhbigpXSlcclxuICAgICAgICAudGhlbigoW3VzZXIsIHBvc3RdKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghdXNlcikgdGhyb3cgbmV3IEVycm9yKCd1c2VyIG5vdCBmb3VuZCcpXHJcbiAgICAgICAgICAgIGlmICghcG9zdCkgdGhyb3cgbmV3IEVycm9yKCdwb3N0IG5vdCBmb3VuZCcpXHJcblxyXG4gICAgICAgICAgICBpZiAocG9zdC5hdXRob3IudG9TdHJpbmcoKSAhPT0gdXNlcklkKSB0aHJvdyBuZXcgRXJyb3IoJ3VzZXIgYW5kIGF1dGhvciBvZiBwb3N0IGlzIGRpZmZlcmVudCcpXHJcblxyXG4gICAgICAgICAgICByZXR1cm4gUG9zdC5kZWxldGVPbmUoeyBfaWQ6IHBvc3QuX2lkIH0pXHJcbiAgICAgICAgfSlcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBkZWxldGVQb3N0Il0sIm1hcHBpbmdzIjoiNjdFQWVZO0FBQUFBLGFBQUEsU0FBQUEsQ0FBQSxTQUFBQyxjQUFBLFdBQUFBLGNBQUEsRUFBQUQsYUFBQSxHQWZaLEtBQU0sQ0FBRUUsSUFBSSxDQUFFQyxJQUFLLENBQUMsRUFBQUgsYUFBQSxHQUFBSSxDQUFBLE1BQUdDLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxFQUNuRCxLQUFNLENBQUVDLFVBQVcsQ0FBQyxFQUFBTixhQUFBLEdBQUFJLENBQUEsTUFBR0MsT0FBTyxDQUFDLHVCQUF1QixDQUFDLEVBRXZELFFBQVMsQ0FBQUUsVUFBVUEsQ0FBQ0MsTUFBTSxDQUFFQyxNQUFNLENBQUUsQ0FBQVQsYUFBQSxHQUFBVSxDQUFBLE1BQUFWLGFBQUEsR0FBQUksQ0FBQSxNQUNoQ0UsVUFBVSxDQUFDRSxNQUFNLENBQUMsQ0FBQVIsYUFBQSxHQUFBSSxDQUFBLE1BQ2xCRSxVQUFVLENBQUNHLE1BQU0sQ0FBQyxDQUFBVCxhQUFBLEdBQUFJLENBQUEsTUFFbEIsTUFBTyxDQUFBTyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxDQUFDVixJQUFJLENBQUNXLFFBQVEsQ0FBQ0wsTUFBTSxDQUFDLENBQUNNLElBQUksQ0FBQyxDQUFDLENBQUVYLElBQUksQ0FBQ1UsUUFBUSxDQUFDSixNQUFNLENBQUMsQ0FBQ0ssSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQzNFQyxJQUFJLENBQUMsQ0FBQyxDQUFDQyxJQUFJLENBQUVDLElBQUksQ0FBQyxHQUFLLENBQUFqQixhQUFBLEdBQUFVLENBQUEsTUFBQVYsYUFBQSxHQUFBSSxDQUFBLE1BQ3BCLEdBQUksQ0FBQ1ksSUFBSSxDQUFFLENBQUFoQixhQUFBLEdBQUFrQixDQUFBLFNBQUFsQixhQUFBLEdBQUFJLENBQUEsV0FBTSxJQUFJLENBQUFlLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFELENBQUMsS0FBQW5CLGFBQUEsR0FBQWtCLENBQUEsVUFBQWxCLGFBQUEsR0FBQUksQ0FBQSxNQUM1QyxHQUFJLENBQUNhLElBQUksQ0FBRSxDQUFBakIsYUFBQSxHQUFBa0IsQ0FBQSxTQUFBbEIsYUFBQSxHQUFBSSxDQUFBLFdBQU0sSUFBSSxDQUFBZSxLQUFLLENBQUMsZ0JBQWdCLENBQUMsQ0FBRCxDQUFDLEtBQUFuQixhQUFBLEdBQUFrQixDQUFBLFVBQUFsQixhQUFBLEdBQUFJLENBQUEsTUFFNUMsR0FBSWEsSUFBSSxDQUFDRyxNQUFNLENBQUNDLFFBQVEsQ0FBQyxDQUFDLEdBQUtiLE1BQU0sQ0FBRSxDQUFBUixhQUFBLEdBQUFrQixDQUFBLFNBQUFsQixhQUFBLEdBQUFJLENBQUEsWUFBTSxJQUFJLENBQUFlLEtBQUssQ0FBQyxzQ0FBc0MsQ0FBQyxDQUFELENBQUMsS0FBQW5CLGFBQUEsR0FBQWtCLENBQUEsVUFBQWxCLGFBQUEsR0FBQUksQ0FBQSxPQUU5RixNQUFPLENBQUFELElBQUksQ0FBQ21CLFNBQVMsQ0FBQyxDQUFFQyxHQUFHLENBQUVOLElBQUksQ0FBQ00sR0FBSSxDQUFDLENBQUMsQ0FDNUMsQ0FBQyxDQUFDLENBQ1YsQ0FBQ3ZCLGFBQUEsR0FBQUksQ0FBQSxPQUVEb0IsTUFBTSxDQUFDQyxPQUFPLENBQUdsQixVQUFVIn0=