function cov_8g9fismqj(){var path="C:\\Users\\loco8\\workspace\\eurofirms-bootcamp-202305\\staff\\manuel-david-castillo\\instaflan-fullstack\\api\\logic\\post-logic\\deletePost.js";var hash="b4cce96f303f683496a6e13f948b61eed3e52660";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\loco8\\workspace\\eurofirms-bootcamp-202305\\staff\\manuel-david-castillo\\instaflan-fullstack\\api\\logic\\post-logic\\deletePost.js",statementMap:{"0":{start:{line:1,column:21},end:{line:1,column:49}},"1":{start:{line:2,column:21},end:{line:2,column:53}},"2":{start:{line:5,column:4},end:{line:5,column:22}},"3":{start:{line:6,column:4},end:{line:6,column:22}},"4":{start:{line:8,column:4},end:{line:16,column:6}},"5":{start:{line:10,column:8},end:{line:10,column:55}},"6":{start:{line:10,column:19},end:{line:10,column:55}},"7":{start:{line:11,column:8},end:{line:11,column:54}},"8":{start:{line:11,column:19},end:{line:11,column:54}},"9":{start:{line:13,column:8},end:{line:13,column:103}},"10":{start:{line:13,column:46},end:{line:13,column:103}},"11":{start:{line:15,column:8},end:{line:15,column:46}},"12":{start:{line:19,column:0},end:{line:19,column:27}}},fnMap:{"0":{name:"deletePost",decl:{start:{line:4,column:9},end:{line:4,column:19}},loc:{start:{line:4,column:36},end:{line:17,column:1}},line:4},"1":{name:"(anonymous_1)",decl:{start:{line:9,column:10},end:{line:9,column:11}},loc:{start:{line:9,column:28},end:{line:16,column:5}},line:9}},branchMap:{"0":{loc:{start:{line:10,column:8},end:{line:10,column:55}},type:"if",locations:[{start:{line:10,column:8},end:{line:10,column:55}},{start:{line:10,column:8},end:{line:10,column:55}}],line:10},"1":{loc:{start:{line:11,column:8},end:{line:11,column:54}},type:"if",locations:[{start:{line:11,column:8},end:{line:11,column:54}},{start:{line:11,column:8},end:{line:11,column:54}}],line:11},"2":{loc:{start:{line:13,column:8},end:{line:13,column:103}},type:"if",locations:[{start:{line:13,column:8},end:{line:13,column:103}},{start:{line:13,column:8},end:{line:13,column:103}}],line:13}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},f:{"0":0,"1":0},b:{"0":[0,0],"1":[0,0],"2":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b4cce96f303f683496a6e13f948b61eed3e52660"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_8g9fismqj=function(){return actualCoverage;};}return actualCoverage;}cov_8g9fismqj();const{User,Post}=(cov_8g9fismqj().s[0]++,require('../../data/models'));const{validateId}=(cov_8g9fismqj().s[1]++,require('../helpers/validators'));function deletePost(userId,postId){cov_8g9fismqj().f[0]++;cov_8g9fismqj().s[2]++;validateId(userId);cov_8g9fismqj().s[3]++;validateId(postId);cov_8g9fismqj().s[4]++;return Promise.all([User.findById(userId).lean(),Post.findById(postId).lean()]).then(([user,post])=>{cov_8g9fismqj().f[1]++;cov_8g9fismqj().s[5]++;if(!user){cov_8g9fismqj().b[0][0]++;cov_8g9fismqj().s[6]++;throw new Error('userId not found');}else{cov_8g9fismqj().b[0][1]++;}cov_8g9fismqj().s[7]++;if(!post){cov_8g9fismqj().b[1][0]++;cov_8g9fismqj().s[8]++;throw new Error('postId not found');}else{cov_8g9fismqj().b[1][1]++;}cov_8g9fismqj().s[9]++;if(post.author.toString()!==userId){cov_8g9fismqj().b[2][0]++;cov_8g9fismqj().s[10]++;throw new Error('userId and author of post is different');}else{cov_8g9fismqj().b[2][1]++;}cov_8g9fismqj().s[11]++;return Post.deleteOne({_id:post._id});});}cov_8g9fismqj().s[12]++;module.exports=deletePost;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfOGc5ZmlzbXFqIiwiYWN0dWFsQ292ZXJhZ2UiLCJVc2VyIiwiUG9zdCIsInMiLCJyZXF1aXJlIiwidmFsaWRhdGVJZCIsImRlbGV0ZVBvc3QiLCJ1c2VySWQiLCJwb3N0SWQiLCJmIiwiUHJvbWlzZSIsImFsbCIsImZpbmRCeUlkIiwibGVhbiIsInRoZW4iLCJ1c2VyIiwicG9zdCIsImIiLCJFcnJvciIsImF1dGhvciIsInRvU3RyaW5nIiwiZGVsZXRlT25lIiwiX2lkIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbImRlbGV0ZVBvc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qge1VzZXIsIFBvc3R9ID0gcmVxdWlyZSgnLi4vLi4vZGF0YS9tb2RlbHMnKVxyXG5jb25zdCB7dmFsaWRhdGVJZH0gPSByZXF1aXJlKCcuLi9oZWxwZXJzL3ZhbGlkYXRvcnMnKVxyXG5cclxuZnVuY3Rpb24gZGVsZXRlUG9zdCh1c2VySWQsIHBvc3RJZCkge1xyXG4gICAgdmFsaWRhdGVJZCh1c2VySWQpXHJcbiAgICB2YWxpZGF0ZUlkKHBvc3RJZClcclxuXHJcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoW1VzZXIuZmluZEJ5SWQodXNlcklkKS5sZWFuKCkgLFBvc3QuZmluZEJ5SWQocG9zdElkKS5sZWFuKCldKVxyXG4gICAgLnRoZW4oKFt1c2VyLCBwb3N0XSkgPT4ge1xyXG4gICAgICAgIGlmICghdXNlcikgdGhyb3cgbmV3IEVycm9yICgndXNlcklkIG5vdCBmb3VuZCcpXHJcbiAgICAgICAgaWYgKCFwb3N0KSB0aHJvdyBuZXcgRXJyb3IoJ3Bvc3RJZCBub3QgZm91bmQnKVxyXG5cclxuICAgICAgICBpZihwb3N0LmF1dGhvci50b1N0cmluZygpICE9PSB1c2VySWQpIHRocm93IG5ldyBFcnJvcigndXNlcklkIGFuZCBhdXRob3Igb2YgcG9zdCBpcyBkaWZmZXJlbnQnKVxyXG5cclxuICAgICAgICByZXR1cm4gUG9zdC5kZWxldGVPbmUoe19pZDogcG9zdC5faWR9KVxyXG4gICAgfSlcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBkZWxldGVQb3N0Il0sIm1hcHBpbmdzIjoiKzZFQWVZO0FBQUFBLGFBQUEsU0FBQUEsQ0FBQSxTQUFBQyxjQUFBLFdBQUFBLGNBQUEsRUFBQUQsYUFBQSxHQWZaLEtBQU0sQ0FBQ0UsSUFBSSxDQUFFQyxJQUFJLENBQUMsRUFBQUgsYUFBQSxHQUFBSSxDQUFBLE1BQUdDLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxFQUNqRCxLQUFNLENBQUNDLFVBQVUsQ0FBQyxFQUFBTixhQUFBLEdBQUFJLENBQUEsTUFBR0MsT0FBTyxDQUFDLHVCQUF1QixDQUFDLEVBRXJELFFBQVMsQ0FBQUUsVUFBVUEsQ0FBQ0MsTUFBTSxDQUFFQyxNQUFNLENBQUUsQ0FBQVQsYUFBQSxHQUFBVSxDQUFBLE1BQUFWLGFBQUEsR0FBQUksQ0FBQSxNQUNoQ0UsVUFBVSxDQUFDRSxNQUFNLENBQUMsQ0FBQVIsYUFBQSxHQUFBSSxDQUFBLE1BQ2xCRSxVQUFVLENBQUNHLE1BQU0sQ0FBQyxDQUFBVCxhQUFBLEdBQUFJLENBQUEsTUFFbEIsTUFBTyxDQUFBTyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxDQUFDVixJQUFJLENBQUNXLFFBQVEsQ0FBQ0wsTUFBTSxDQUFDLENBQUNNLElBQUksQ0FBQyxDQUFDLENBQUVYLElBQUksQ0FBQ1UsUUFBUSxDQUFDSixNQUFNLENBQUMsQ0FBQ0ssSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQy9FQyxJQUFJLENBQUMsQ0FBQyxDQUFDQyxJQUFJLENBQUVDLElBQUksQ0FBQyxHQUFLLENBQUFqQixhQUFBLEdBQUFVLENBQUEsTUFBQVYsYUFBQSxHQUFBSSxDQUFBLE1BQ3BCLEdBQUksQ0FBQ1ksSUFBSSxDQUFFLENBQUFoQixhQUFBLEdBQUFrQixDQUFBLFNBQUFsQixhQUFBLEdBQUFJLENBQUEsV0FBTSxJQUFJLENBQUFlLEtBQUssQ0FBRSxrQkFBa0IsQ0FBQyxDQUFELENBQUMsS0FBQW5CLGFBQUEsR0FBQWtCLENBQUEsVUFBQWxCLGFBQUEsR0FBQUksQ0FBQSxNQUMvQyxHQUFJLENBQUNhLElBQUksQ0FBRSxDQUFBakIsYUFBQSxHQUFBa0IsQ0FBQSxTQUFBbEIsYUFBQSxHQUFBSSxDQUFBLFdBQU0sSUFBSSxDQUFBZSxLQUFLLENBQUMsa0JBQWtCLENBQUMsQ0FBRCxDQUFDLEtBQUFuQixhQUFBLEdBQUFrQixDQUFBLFVBQUFsQixhQUFBLEdBQUFJLENBQUEsTUFFOUMsR0FBR2EsSUFBSSxDQUFDRyxNQUFNLENBQUNDLFFBQVEsQ0FBQyxDQUFDLEdBQUtiLE1BQU0sQ0FBRSxDQUFBUixhQUFBLEdBQUFrQixDQUFBLFNBQUFsQixhQUFBLEdBQUFJLENBQUEsWUFBTSxJQUFJLENBQUFlLEtBQUssQ0FBQyx3Q0FBd0MsQ0FBQyxDQUFELENBQUMsS0FBQW5CLGFBQUEsR0FBQWtCLENBQUEsVUFBQWxCLGFBQUEsR0FBQUksQ0FBQSxPQUUvRixNQUFPLENBQUFELElBQUksQ0FBQ21CLFNBQVMsQ0FBQyxDQUFDQyxHQUFHLENBQUVOLElBQUksQ0FBQ00sR0FBRyxDQUFDLENBQUMsQ0FDMUMsQ0FBQyxDQUFDLENBQ04sQ0FBQ3ZCLGFBQUEsR0FBQUksQ0FBQSxPQUVEb0IsTUFBTSxDQUFDQyxPQUFPLENBQUdsQixVQUFVIn0=