function cov_6senp319u(){var path="C:\\Users\\loco8\\workspace\\eurofirms-bootcamp-202305\\staff\\manuel-david-castillo\\instaflan-fullstack\\api\\logic\\user-logic\\retrieveFollowed.js";var hash="599af02d2263cbf5b226daa5064aac4d1396ca71";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\loco8\\workspace\\eurofirms-bootcamp-202305\\staff\\manuel-david-castillo\\instaflan-fullstack\\api\\logic\\user-logic\\retrieveFollowed.js",statementMap:{"0":{start:{line:1,column:17},end:{line:1,column:45}},"1":{start:{line:2,column:23},end:{line:2,column:55}},"2":{start:{line:5,column:4},end:{line:5,column:22}},"3":{start:{line:6,column:4},end:{line:6,column:29}},"4":{start:{line:8,column:4},end:{line:22,column:6}},"5":{start:{line:11,column:8},end:{line:11,column:51}},"6":{start:{line:11,column:18},end:{line:11,column:51}},"7":{start:{line:12,column:8},end:{line:12,column:65}},"8":{start:{line:12,column:25},end:{line:12,column:65}},"9":{start:{line:14,column:25},end:{line:14,column:45}},"10":{start:{line:16,column:8},end:{line:19,column:11}},"11":{start:{line:17,column:12},end:{line:17,column:55}},"12":{start:{line:18,column:12},end:{line:18,column:34}},"13":{start:{line:21,column:8},end:{line:21,column:23}},"14":{start:{line:25,column:0},end:{line:25,column:33}}},fnMap:{"0":{name:"retrieveFollowed",decl:{start:{line:4,column:9},end:{line:4,column:25}},loc:{start:{line:4,column:49},end:{line:23,column:1}},line:4},"1":{name:"(anonymous_1)",decl:{start:{line:10,column:10},end:{line:10,column:11}},loc:{start:{line:10,column:35},end:{line:22,column:5}},line:10},"2":{name:"(anonymous_2)",decl:{start:{line:16,column:25},end:{line:16,column:26}},loc:{start:{line:16,column:40},end:{line:19,column:9}},line:16}},branchMap:{"0":{loc:{start:{line:11,column:8},end:{line:11,column:51}},type:"if",locations:[{start:{line:11,column:8},end:{line:11,column:51}},{start:{line:11,column:8},end:{line:11,column:51}}],line:11},"1":{loc:{start:{line:12,column:8},end:{line:12,column:65}},type:"if",locations:[{start:{line:12,column:8},end:{line:12,column:65}},{start:{line:12,column:8},end:{line:12,column:65}}],line:12}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"599af02d2263cbf5b226daa5064aac4d1396ca71"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_6senp319u=function(){return actualCoverage;};}return actualCoverage;}cov_6senp319u();const{User}=(cov_6senp319u().s[0]++,require("../../data/models"));const{validateId}=(cov_6senp319u().s[1]++,require("../helpers/validators"));function retrieveFollowed(userId,userIdProfile){cov_6senp319u().f[0]++;cov_6senp319u().s[2]++;validateId(userId);cov_6senp319u().s[3]++;validateId(userIdProfile);cov_6senp319u().s[4]++;return Promise.all([User.findById(userId,'-__v').lean(),User.findById(userIdProfile,'-__v').populate('followed','name image').lean()]).then(([user,userProfile])=>{cov_6senp319u().f[1]++;cov_6senp319u().s[5]++;if(!user){cov_6senp319u().b[0][0]++;cov_6senp319u().s[6]++;throw new Error('user not found');}else{cov_6senp319u().b[0][1]++;}cov_6senp319u().s[7]++;if(!userProfile){cov_6senp319u().b[1][0]++;cov_6senp319u().s[8]++;throw new Error('userProfile not found');}else{cov_6senp319u().b[1][1]++;}const followed=(cov_6senp319u().s[9]++,userProfile.followed);cov_6senp319u().s[10]++;followed.forEach(userProfile=>{cov_6senp319u().f[2]++;cov_6senp319u().s[11]++;userProfile.id=userProfile._id.toString();cov_6senp319u().s[12]++;delete userProfile._id;});cov_6senp319u().s[13]++;return followed;});}cov_6senp319u().s[14]++;module.exports=retrieveFollowed;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfNnNlbnAzMTl1IiwiYWN0dWFsQ292ZXJhZ2UiLCJVc2VyIiwicyIsInJlcXVpcmUiLCJ2YWxpZGF0ZUlkIiwicmV0cmlldmVGb2xsb3dlZCIsInVzZXJJZCIsInVzZXJJZFByb2ZpbGUiLCJmIiwiUHJvbWlzZSIsImFsbCIsImZpbmRCeUlkIiwibGVhbiIsInBvcHVsYXRlIiwidGhlbiIsInVzZXIiLCJ1c2VyUHJvZmlsZSIsImIiLCJFcnJvciIsImZvbGxvd2VkIiwiZm9yRWFjaCIsImlkIiwiX2lkIiwidG9TdHJpbmciLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsicmV0cmlldmVGb2xsb3dlZC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IFVzZXIgfSA9IHJlcXVpcmUoXCIuLi8uLi9kYXRhL21vZGVsc1wiKTtcclxuY29uc3QgeyB2YWxpZGF0ZUlkIH0gPSByZXF1aXJlKFwiLi4vaGVscGVycy92YWxpZGF0b3JzXCIpO1xyXG5cclxuZnVuY3Rpb24gcmV0cmlldmVGb2xsb3dlZCh1c2VySWQsIHVzZXJJZFByb2ZpbGUpIHtcclxuICAgIHZhbGlkYXRlSWQodXNlcklkKVxyXG4gICAgdmFsaWRhdGVJZCh1c2VySWRQcm9maWxlKVxyXG5cclxuICAgIHJldHVybiBQcm9taXNlLmFsbChbVXNlci5maW5kQnlJZCh1c2VySWQsICctX192JykubGVhbigpLFxyXG4gICAgICAgIFVzZXIuZmluZEJ5SWQodXNlcklkUHJvZmlsZSwgJy1fX3YnKS5wb3B1bGF0ZSgnZm9sbG93ZWQnLCAnbmFtZSBpbWFnZScpLmxlYW4oKV0pIFxyXG4gICAgLnRoZW4oKFt1c2VyLCB1c2VyUHJvZmlsZV0pID0+IHtcclxuICAgICAgICBpZighdXNlcikgdGhyb3cgbmV3IEVycm9yKCd1c2VyIG5vdCBmb3VuZCcpXHJcbiAgICAgICAgaWYoIXVzZXJQcm9maWxlKSB0aHJvdyBuZXcgRXJyb3IoJ3VzZXJQcm9maWxlIG5vdCBmb3VuZCcpXHJcblxyXG4gICAgICAgIGNvbnN0IGZvbGxvd2VkID0gdXNlclByb2ZpbGUuZm9sbG93ZWRcclxuXHJcbiAgICAgICAgZm9sbG93ZWQuZm9yRWFjaCh1c2VyUHJvZmlsZSA9PiB7XHJcbiAgICAgICAgICAgIHVzZXJQcm9maWxlLmlkID0gdXNlclByb2ZpbGUuX2lkLnRvU3RyaW5nKClcclxuICAgICAgICAgICAgZGVsZXRlIHVzZXJQcm9maWxlLl9pZFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gZm9sbG93ZWRcclxuICAgIH0pXHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gcmV0cmlldmVGb2xsb3dlZCJdLCJtYXBwaW5ncyI6IjhnRkFlWTtBQUFBQSxhQUFBLFNBQUFBLENBQUEsU0FBQUMsY0FBQSxXQUFBQSxjQUFBLEVBQUFELGFBQUEsR0FmWixLQUFNLENBQUVFLElBQUssQ0FBQyxFQUFBRixhQUFBLEdBQUFHLENBQUEsTUFBR0MsT0FBTyxDQUFDLG1CQUFtQixDQUFDLEVBQzdDLEtBQU0sQ0FBRUMsVUFBVyxDQUFDLEVBQUFMLGFBQUEsR0FBQUcsQ0FBQSxNQUFHQyxPQUFPLENBQUMsdUJBQXVCLENBQUMsRUFFdkQsUUFBUyxDQUFBRSxnQkFBZ0JBLENBQUNDLE1BQU0sQ0FBRUMsYUFBYSxDQUFFLENBQUFSLGFBQUEsR0FBQVMsQ0FBQSxNQUFBVCxhQUFBLEdBQUFHLENBQUEsTUFDN0NFLFVBQVUsQ0FBQ0UsTUFBTSxDQUFDLENBQUFQLGFBQUEsR0FBQUcsQ0FBQSxNQUNsQkUsVUFBVSxDQUFDRyxhQUFhLENBQUMsQ0FBQVIsYUFBQSxHQUFBRyxDQUFBLE1BRXpCLE1BQU8sQ0FBQU8sT0FBTyxDQUFDQyxHQUFHLENBQUMsQ0FBQ1QsSUFBSSxDQUFDVSxRQUFRLENBQUNMLE1BQU0sQ0FBRSxNQUFNLENBQUMsQ0FBQ00sSUFBSSxDQUFDLENBQUMsQ0FDcERYLElBQUksQ0FBQ1UsUUFBUSxDQUFDSixhQUFhLENBQUUsTUFBTSxDQUFDLENBQUNNLFFBQVEsQ0FBQyxVQUFVLENBQUUsWUFBWSxDQUFDLENBQUNELElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUNuRkUsSUFBSSxDQUFDLENBQUMsQ0FBQ0MsSUFBSSxDQUFFQyxXQUFXLENBQUMsR0FBSyxDQUFBakIsYUFBQSxHQUFBUyxDQUFBLE1BQUFULGFBQUEsR0FBQUcsQ0FBQSxNQUMzQixHQUFHLENBQUNhLElBQUksQ0FBRSxDQUFBaEIsYUFBQSxHQUFBa0IsQ0FBQSxTQUFBbEIsYUFBQSxHQUFBRyxDQUFBLFdBQU0sSUFBSSxDQUFBZ0IsS0FBSyxDQUFDLGdCQUFnQixDQUFDLENBQUQsQ0FBQyxLQUFBbkIsYUFBQSxHQUFBa0IsQ0FBQSxVQUFBbEIsYUFBQSxHQUFBRyxDQUFBLE1BQzNDLEdBQUcsQ0FBQ2MsV0FBVyxDQUFFLENBQUFqQixhQUFBLEdBQUFrQixDQUFBLFNBQUFsQixhQUFBLEdBQUFHLENBQUEsV0FBTSxJQUFJLENBQUFnQixLQUFLLENBQUMsdUJBQXVCLENBQUMsQ0FBRCxDQUFDLEtBQUFuQixhQUFBLEdBQUFrQixDQUFBLFVBRXpELEtBQU0sQ0FBQUUsUUFBUSxFQUFBcEIsYUFBQSxHQUFBRyxDQUFBLE1BQUdjLFdBQVcsQ0FBQ0csUUFBUSxFQUFBcEIsYUFBQSxHQUFBRyxDQUFBLE9BRXJDaUIsUUFBUSxDQUFDQyxPQUFPLENBQUNKLFdBQVcsRUFBSSxDQUFBakIsYUFBQSxHQUFBUyxDQUFBLE1BQUFULGFBQUEsR0FBQUcsQ0FBQSxPQUM1QmMsV0FBVyxDQUFDSyxFQUFFLENBQUdMLFdBQVcsQ0FBQ00sR0FBRyxDQUFDQyxRQUFRLENBQUMsQ0FBQyxDQUFBeEIsYUFBQSxHQUFBRyxDQUFBLE9BQzNDLE1BQU8sQ0FBQWMsV0FBVyxDQUFDTSxHQUFHLENBQzFCLENBQUMsQ0FBQyxDQUFDdkIsYUFBQSxHQUFBRyxDQUFBLE9BRUgsTUFBTyxDQUFBaUIsUUFBUSxDQUNuQixDQUFDLENBQUMsQ0FDTixDQUFDcEIsYUFBQSxHQUFBRyxDQUFBLE9BRURzQixNQUFNLENBQUNDLE9BQU8sQ0FBR3BCLGdCQUFnQiJ9